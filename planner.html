<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14-Day Diversified Planner | FitSphere</title>
    <link rel="shortcut icon" href="logo1.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===== CSS VARIABLES ===== */
        :root {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --secondary: #10b981;
            --secondary-dark: #059669;
            --accent: #f59e0b;
            --danger: #ef4444;
            --purple: #8b5cf6;
            
            --bg-body: #f8fafc;
            --bg-card: #ffffff;
            --bg-header: #ffffff;
            --bg-input: #f1f5f9;
            
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            
            --border: #e2e8f0;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 20px rgba(0,0,0,0.08);
            --shadow-lg: 0 10px 40px rgba(0,0,0,0.12);
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary: #60a5fa;
            --primary-dark: #3b82f6;
            --secondary: #34d399;
            --secondary-dark: #10b981;
            --accent: #fbbf24;
            --danger: #f87171;
            --purple: #a78bfa;
            
            --bg-body: #0f172a;
            --bg-card: #1e293b;
            --bg-header: #1e293b;
            --bg-input: #334155;
            
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            
            --border: #475569;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.3);
            --shadow-md: 0 4px 20px rgba(0,0,0,0.25);
            --shadow-lg: 0 10px 40px rgba(0,0,0,0.35);
        }

        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-body);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            transition: var(--transition);
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== HEADER ===== */
        header {
            background: var(--bg-header);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 24px;
            color: var(--primary);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--purple));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-link {
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 15px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border-radius: var(--radius-sm);
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary);
            background: rgba(59, 130, 246, 0.1);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .theme-switch {
            position: relative;
            width: 50px;
            height: 26px;
            background: var(--bg-input);
            border-radius: 13px;
            cursor: pointer;
            border: 2px solid var(--border);
            transition: var(--transition);
        }

        .theme-switch::before {
            content: '';
            position: absolute;
            width: 22px;
            height: 22px;
            background: var(--primary);
            border-radius: 50%;
            top: 0;
            left: 0;
            transform: translate(2px, 2px);
            transition: var(--transition);
        }

        [data-theme="dark"] .theme-switch::before {
            transform: translate(24px, 2px);
        }

        .menu-toggle {
            display: none;
            font-size: 24px;
            color: var(--text-primary);
            cursor: pointer;
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            padding: 40px 0;
        }

        .page-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .page-title {
            font-family: 'Poppins', sans-serif;
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .page-subtitle {
            color: var(--text-secondary);
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ===== PLANNER FORM ===== */
        .planner-form {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 40px;
            box-shadow: var(--shadow-md);
            margin-bottom: 40px;
            border: 1px solid var(--border);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .form-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            font-size: 16px;
            color: var(--text-primary);
            transition: var(--transition);
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 15px 30px;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            width: 100%;
            justify-content: center;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        /* ===== RESULTS SECTION ===== */
        .results-section {
            display: none;
        }

        .day-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: var(--bg-card);
            padding: 20px;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
        }

        .day-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .day-badge {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            padding: 8px 16px;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 14px;
        }

        .day-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .btn-secondary {
            background: var(--bg-input);
            color: var(--text-primary);
            border: 1px solid var(--border);
            padding: 10px 20px;
            font-size: 14px;
        }

        .btn-secondary:hover {
            background: var(--border);
            transform: translateY(-2px);
        }

        .btn-accent {
            background: var(--accent);
            color: white;
            padding: 10px 20px;
            font-size: 14px;
        }

        .btn-accent:hover {
            background: #d97706;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
            padding: 10px 20px;
            font-size: 14px;
        }

        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        /* ===== PLAN CARDS ===== */
        .plan-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .plan-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 30px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .plan-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .icon-diet { background: linear-gradient(135deg, var(--secondary), var(--secondary-dark)); }
        .icon-exercise { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); }
        .icon-balance { background: linear-gradient(135deg, var(--purple), #7c3aed); }

        .meal-item, .exercise-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: var(--bg-input);
            border-radius: var(--radius-md);
            margin-bottom: 10px;
            border: 1px solid var(--border);
            position: relative;
        }

        .meal-name, .exercise-name {
            font-weight: 500;
            color: var(--text-primary);
            flex: 1;
        }

        .meal-calories, .exercise-burn {
            font-weight: 600;
            color: var(--secondary);
            margin-right: 30px;
        }

        .exercise-burn {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 13px;
            margin-right: 10px;
        }

        .remove-exercise {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--danger);
            cursor: pointer;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .remove-exercise:hover {
            background: rgba(239, 68, 68, 0.1);
        }

        /* ===== BALANCE STATS ===== */
        .balance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .stat-box {
            background: var(--bg-input);
            padding: 20px;
            border-radius: var(--radius-md);
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-number {
            font-size: 28px;
            font-weight: 700;
            display: block;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-muted);
        }

        .perfect { color: var(--secondary); }
        .good { color: var(--accent); }
        .fair { color: var(--danger); }

        /* ===== CUISINE BADGES ===== */
        .cuisine-badges {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .badge-south { background: rgba(59, 130, 246, 0.1); color: var(--primary); }
        .badge-north { background: rgba(245, 158, 11, 0.1); color: var(--accent); }
        .badge-continental { background: rgba(16, 185, 129, 0.1); color: var(--secondary); }
        .badge-regular { background: rgba(139, 92, 246, 0.1); color: var(--purple); }
        .badge-meat { background: rgba(239, 68, 68, 0.1); color: var(--danger); }

        .badge:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        /* ===== EXERCISE CUSTOMIZATION ===== */
        .customization-panel {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 25px;
            margin-top: 20px;
            border: 1px solid var(--border);
            display: none;
        }

        .customization-panel.active {
            display: block;
        }

        .alternative-exercises {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .alt-exercise {
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 15px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .alt-exercise:hover {
            border-color: var(--primary);
            background: rgba(59, 130, 246, 0.05);
        }

        /* ===== UPLANNER PROMO ===== */
        .uplanner-promo {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            border-radius: var(--radius-lg);
            padding: 40px;
            text-align: center;
            color: white;
            margin-top: 50px;
            display: none;
        }

        .uplanner-promo h3 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .uplanner-promo p {
            opacity: 0.9;
            margin-bottom: 25px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .btn-outline {
            background: transparent;
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 12px 30px;
        }

        .btn-outline:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: white;
        }

        /* ===== EXERCISE DIRECTORY ===== */
        .exercise-directory {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-top: 40px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-md);
        }

        .directory-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .directory-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .exercise-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .exercise-option {
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 15px;
            cursor: pointer;
            transition: var(--transition);
        }

        .exercise-option:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .exercise-option.selected {
            border-color: var(--primary);
            background: rgba(59, 130, 246, 0.05);
        }

        /* ===== JUMP TO DAY ===== */
        .jump-to-day {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }

        .day-selector {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
        }

        .day-selector label {
            font-weight: 600;
            color: var(--text-primary);
        }

        .day-selector select {
            padding: 8px 16px;
            border-radius: var(--radius-md);
            border: 1px solid var(--border);
            background: var(--bg-input);
            color: var(--text-primary);
            min-width: 120px;
        }

        /* ===== PRINT BUTTON ===== */
        .print-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            padding: 20px;
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border);
        }

        /* ===== PRINT STYLES ===== */
        @media print {
            header, footer, .planner-form, .uplanner-promo, 
            .print-actions, .day-navigation, .btn, 
            .exercise-directory, .customization-panel,
            .remove-exercise, .badge {
                display: none !important;
            }
            
            .results-section {
                display: block !important;
            }
            
            .plan-cards {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .plan-card {
                box-shadow: none !important;
                border: 1px solid #ccc !important;
                page-break-inside: avoid;
            }
            
            body {
                background: white !important;
                color: black !important;
            }
            
            .container {
                max-width: 100% !important;
                padding: 0 !important;
            }
            
            .main-content {
                padding: 0 !important;
            }
            
            h1, h2, h3, h4, h5, h6 {
                color: black !important;
            }
        }

        /* ===== FOOTER ===== */
        footer {
            background: var(--bg-card);
            padding: 40px 0 20px;
            border-top: 1px solid var(--border);
            margin-top: 60px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-col h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .footer-col ul li {
            margin-bottom: 10px;
        }

        .footer-col ul li a {
            color: var(--text-secondary);
            font-size: 14px;
            transition: var(--transition);
        }

        .footer-col ul li a:hover {
            color: var(--primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 13px;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block;
            }

            .nav-links {
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                background: var(--bg-header);
                flex-direction: column;
                padding: 20px;
                gap: 0;
                box-shadow: var(--shadow-lg);
                transform: translateY(-100%);
                opacity: 0;
                visibility: hidden;
                transition: var(--transition);
            }

            .nav-links.active {
                transform: translateY(0);
                opacity: 1;
                visibility: visible;
            }

            .nav-link {
                width: 100%;
                padding: 15px;
                border-radius: 0;
                border-bottom: 1px solid var(--border);
            }

            .planner-form {
                padding: 30px 20px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .day-navigation {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .plan-cards {
                grid-template-columns: 1fr;
            }

            .directory-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .print-actions {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    FitSphere
                </a>

                <div class="nav-links" id="navLinks">
                    <a href="index.html" class="nav-link">
                        <i class="fas fa-home"></i> Home
                    </a>
                    <a href="planner.html" class="nav-link active">
                        <i class="fas fa-calendar-alt"></i> Planner
                    </a>
                    <a href="uplanner.html" class="nav-link">
                        <i class="fas fa-user-cog"></i> UPlanner
                    </a>
                    <a href="food.html" class="nav-link">
                        <i class="fas fa-utensils"></i> Food Items
                    </a>
                    <a href="exercise.html" class="nav-link">
                        <i class="fas fa-dumbbell"></i> Exercises
                    </a>
                </div>

                <div class="header-actions">
                    <div class="theme-switch" id="themeSwitch"></div>
                    <div class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1 class="page-title">14-Day Diversified Diet & Exercise Planner</h1>
                <p class="page-subtitle">Get a personalized 14-day plan with diverse cuisines and balanced exercises</p>
            </div>

            <!-- Planner Form -->
            <div class="planner-form">
                <form id="plannerForm" onsubmit="generatePlan(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="age">Age</label>
                            <input type="number" id="age" required placeholder="e.g. 25" min="15" max="100">
                        </div>
                        
                        <div class="form-group">
                            <label for="gender">Gender</label>
                            <select id="gender">
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="height">Height (cm)</label>
                            <input type="number" id="height" required placeholder="e.g. 175" min="100" max="250">
                        </div>
                        
                        <div class="form-group">
                            <label for="weight">Weight (kg)</label>
                            <input type="number" id="weight" required placeholder="e.g. 70" min="30" max="200" step="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label for="activity">Activity Level</label>
                            <select id="activity">
                                <option value="1.2">Sedentary (Office Job)</option>
                                <option value="1.375">Light (1-3 days/week)</option>
                                <option value="1.55">Moderate (3-5 days/week)</option>
                                <option value="1.725">Active (6-7 days/week)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="goal">Goal</label>
                            <select id="goal">
                                <option value="lose">Lose Weight</option>
                                <option value="maintain">Maintain Weight</option>
                                <option value="gain">Gain Muscle</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="target">Target Change (kg)</label>
                            <input type="number" id="target" required placeholder="e.g. 5" step="0.1">
                        </div>
                        
                        <div class="form-group">
                            <label for="weeks">Duration (weeks)</label>
                            <input type="number" id="weeks" required placeholder="e.g. 8" min="1" max="52">
                        </div>
                        
                        <div class="form-group">
                            <label for="dietPreference">Diet Preference</label>
                            <select id="dietPreference">
                                <option value="balanced">Balanced Mix</option>
                                <option value="veg">Vegetarian</option>
                                <option value="nonveg">Non-Vegetarian</option>
                                <option value="high_protein">High Protein</option>
                                <option value="light">Light Meals</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-magic"></i> Generate 14-Day Diversified Plan
                    </button>
                </form>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="resultsSection">
                <!-- Jump to Day -->
                <div class="jump-to-day">
                    <div class="day-selector">
                        <label for="jumpToDay">Jump to Day:</label>
                        <select id="jumpToDay">
                            <option value="1">Day 1</option>
                            <option value="2">Day 2</option>
                            <option value="3">Day 3</option>
                            <option value="4">Day 4</option>
                            <option value="5">Day 5</option>
                            <option value="6">Day 6</option>
                            <option value="7">Day 7</option>
                            <option value="8">Day 8</option>
                            <option value="9">Day 9</option>
                            <option value="10">Day 10</option>
                            <option value="11">Day 11</option>
                            <option value="12">Day 12</option>
                            <option value="13">Day 13</option>
                            <option value="14">Day 14</option>
                        </select>
                        
                        <button class="btn btn-secondary" id="changeCuisineBtn">
                            <i class="fas fa-exchange-alt"></i> Change Day Cuisine
                        </button>
                    </div>
                </div>

                <!-- Day Navigation -->
                <div class="day-navigation">
                    <div class="day-info">
                        <div class="day-badge" id="dayBadge">Day 1 of 14</div>
                        <div class="day-title" id="dayTitle">South Indian Cuisine</div>
                    </div>
                    
                    <div class="nav-buttons">
                        <button class="btn btn-secondary" id="shuffleFoodsBtn">
                            <i class="fas fa-random"></i> Shuffle Foods
                        </button>
                        <button class="btn btn-secondary" id="regenerateDayBtn">
                            <i class="fas fa-redo"></i> Regenerate Day
                        </button>
                        <button class="btn btn-secondary" id="prevDayBtn" disabled>
                            <i class="fas fa-arrow-left"></i> Previous Day
                        </button>
                        <button class="btn btn-accent" id="nextDayBtn">
                            Next Day <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Plan Cards -->
                <div class="plan-cards">
                    <!-- Diet Plan Card -->
                    <div class="plan-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <div class="card-icon icon-diet">
                                    <i class="fas fa-utensils"></i>
                                </div>
                                Today's Meal Plan
                            </h3>
                            <button class="btn btn-secondary" id="refreshMealsBtn" style="padding: 8px 15px; font-size: 13px;">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        
                        <div class="meal-list" id="mealList">
                            <!-- Meals populated by JavaScript -->
                        </div>
                        
                        <!-- Cuisine Badges -->
                        <div class="cuisine-badges" id="cuisineBadges">
                            <!-- Badges populated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Exercise Plan Card -->
                    <div class="plan-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <div class="card-icon icon-exercise">
                                    <i class="fas fa-running"></i>
                                </div>
                                Exercise Plan
                            </h3>
                            <button class="btn btn-secondary" id="customizeExerciseBtn" style="padding: 8px 15px; font-size: 13px;">
                                <i class="fas fa-exchange-alt"></i> Customize
                            </button>
                        </div>
                        
                        <div class="exercise-list" id="exerciseList">
                            <!-- Exercises populated by JavaScript -->
                        </div>
                        
                        <!-- Exercise Customization Panel -->
                        <div class="customization-panel" id="customizationPanel">
                            <h4 style="margin-bottom: 15px; color: var(--text-primary);">Swap with alternatives:</h4>
                            <div class="alternative-exercises" id="alternativeExercises">
                                <!-- Alternatives populated by JavaScript -->
                            </div>
                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn btn-secondary" id="closeCustomizationBtn">
                                    <i class="fas fa-times"></i> Close
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Balance Card -->
                    <div class="plan-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <div class="card-icon icon-balance">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                Calorie Balance
                            </h3>
                            <span id="balanceStatus" style="color: var(--secondary); font-weight: 600;">
                                <i class="fas fa-check-circle"></i> PERFECT
                            </span>
                        </div>
                        
                        <div class="balance-stats">
                            <div class="stat-box">
                                <span class="stat-number perfect" id="targetCalories">2300</span>
                                <span class="stat-label">Target</span>
                            </div>
                            
                            <div class="stat-box">
                                <span class="stat-number" id="foodIntake">930</span>
                                <span class="stat-label">Food Intake</span>
                            </div>
                            
                            <div class="stat-box">
                                <span class="stat-number" id="exerciseBurn" style="color: var(--danger);">540</span>
                                <span class="stat-label">Exercise Burn</span>
                            </div>
                            
                            <div class="stat-box">
                                <span class="stat-number perfect" id="netCalories">390</span>
                                <span class="stat-label">Net Calories</span>
                            </div>
                        </div>
                        
                        <div id="balanceMessage" style="text-align: center; margin-top: 20px; font-size: 14px; color: var(--secondary);">
                            <i class="fas fa-check-circle"></i> Perfect Balance Achieved!
                        </div>
                    </div>
                </div>

                <!-- Enhanced Exercise Directory -->
                <div class="exercise-directory">
                    <div class="directory-header">
                        <h3 style="font-size: 18px; font-weight: 600; color: var(--text-primary);">
                            <i class="fas fa-dumbbell"></i> Exercise Directory
                        </h3>
                        
                        <div class="directory-filters">
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="cardio">Cardio</button>
                            <button class="filter-btn" data-filter="strength">Strength</button>
                            <button class="filter-btn" data-filter="flexibility">Flexibility</button>
                            <button class="filter-btn" data-filter="hiit">HIIT</button>
                            <button class="filter-btn" data-filter="yoga">Yoga</button>
                        </div>
                    </div>
                    
                    <div class="exercise-list" id="directoryExerciseList">
                        <!-- Directory exercises populated by JavaScript -->
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-secondary" id="addExercisesBtn">
                            <i class="fas fa-plus"></i> Add Selected Exercises to Plan
                        </button>
                        <button class="btn btn-danger" id="removeExercisesBtn">
                            <i class="fas fa-trash"></i> Remove Selected Exercises
                        </button>
                    </div>
                </div>

                <!-- Print Actions -->
                <div class="print-actions">
                    <button class="btn btn-primary" id="printPlanBtn">
                        <i class="fas fa-print"></i> Print 14-Day Plan
                    </button>
                    <button class="btn btn-secondary" id="savePlanBtn">
                        <i class="fas fa-download"></i> Save Plan as PDF
                    </button>
                </div>

                <!-- UPlanner Promo -->
                <div class="uplanner-promo" id="uplannerPromo">
                    <h3>Want More Control?</h3>
                    <p>Create your own personalized meal plan with exact foods, portions, and timing using our advanced custom planner.</p>
                    <a href="uplanner.html" class="btn btn-outline">
                        <i class="fas fa-user-cog"></i> Try UPlanner Pro
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>FitSphere</h3>
                    <p style="color: var(--text-secondary); font-size: 14px; margin-top: 10px;">Smart nutrition and fitness planning for everyone.</p>
                </div>
                
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="planner.html">Planner</a></li>
                        <li><a href="food.html">Food Database</a></li>
                        <li><a href="exercise.html">Exercises</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="disclaimer.html">Disclaimer</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="term.html">Terms & Conditions</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Contact</h3>
                    <ul>
                        <li><a href="contact.html">Contact Us</a></li>
                        
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2026 FitSphere;Created by: Soham Jadhav (GL), Sarthak Jadhav (AGL), Swaroop Jagtap, Pratik Jagtap, Taksh Jadhav</p>
            </div>
        </div>
    </footer>

    <script>
        // Food data from food-data.js
        const foodData = [
            { "name": "Apple", "cal": 162, "protein": 8.5, "carbs": 38.9, "fat": 0.4 },
            { "name": "Banana", "cal": 112, "protein": 34.4, "carbs": 47.9, "fat": 6.5 },
            { "name": "Orange", "cal": 49, "protein": 6.8, "carbs": 53.8, "fat": 1.7 },
            { "name": "Mango", "cal": 192, "protein": 13.1, "carbs": 6.8, "fat": 4.2 },
            { "name": "Papaya", "cal": 111, "protein": 30.1, "carbs": 9.7, "fat": 21.3 },
            { "name": "Guava", "cal": 323, "protein": 19.7, "carbs": 48.2, "fat": 24.9 },
            { "name": "Grapes", "cal": 152, "protein": 8.2, "carbs": 8.6, "fat": 2.4 },
            { "name": "Pineapple", "cal": 279, "protein": 14.2, "carbs": 23.5, "fat": 5.9 },
            { "name": "Watermelon", "cal": 73, "protein": 13.6, "carbs": 5.4, "fat": 18.2 },
            { "name": "Muskmelon", "cal": 176, "protein": 28.4, "carbs": 33.4, "fat": 20.6 },
            { "name": "Pear", "cal": 52, "protein": 2.4, "carbs": 51.0, "fat": 21.0 },
            { "name": "Peach", "cal": 303, "protein": 8.9, "carbs": 37.9, "fat": 12.8 },
            { "name": "Plum", "cal": 301, "protein": 31.3, "carbs": 31.8, "fat": 16.0 },
            { "name": "Kiwi", "cal": 231, "protein": 8.1, "carbs": 30.7, "fat": 14.9 },
            { "name": "Strawberry", "cal": 222, "protein": 5.5, "carbs": 35.0, "fat": 21.7 },
            { "name": "Blueberry", "cal": 296, "protein": 28.0, "carbs": 47.3, "fat": 1.9 },
            { "name": "Raspberry", "cal": 307, "protein": 27.1, "carbs": 9.2, "fat": 23.0 },
            { "name": "Blackberry", "cal": 195, "protein": 27.5, "carbs": 48.5, "fat": 20.1 },
            { "name": "Pomegranate", "cal": 169, "protein": 33.1, "carbs": 37.1, "fat": 9.6 },
            { "name": "Fig", "cal": 160, "protein": 23.0, "carbs": 50.6, "fat": 6.9 },
            { "name": "Dates", "cal": 145, "protein": 12.8, "carbs": 18.5, "fat": 5.4 },
            { "name": "Cherries", "cal": 350, "protein": 23.4, "carbs": 31.0, "fat": 24.7 },
            { "name": "Apricot", "cal": 119, "protein": 6.9, "carbs": 14.3, "fat": 10.9 },
            { "name": "Avocado", "cal": 204, "protein": 14.8, "carbs": 44.6, "fat": 20.1 },
            { "name": "Custard Apple", "cal": 86, "protein": 25.9, "carbs": 48.4, "fat": 24.5 },
            { "name": "Lychee", "cal": 342, "protein": 24.6, "carbs": 49.5, "fat": 12.1 },
            { "name": "Jackfruit", "cal": 291, "protein": 7.0, "carbs": 47.0, "fat": 0.8 },
            { "name": "Dragon Fruit", "cal": 197, "protein": 4.4, "carbs": 13.9, "fat": 19.0 },
            { "name": "Coconut Meat", "cal": 209, "protein": 34.7, "carbs": 26.5, "fat": 2.2 },
            { "name": "Sapota", "cal": 246, "protein": 20.8, "carbs": 54.7, "fat": 23.9 },
            { "name": "Star Fruit", "cal": 90, "protein": 16.5, "carbs": 26.0, "fat": 6.9 },
            { "name": "Passion Fruit", "cal": 162, "protein": 34.3, "carbs": 28.8, "fat": 1.5 },
            { "name": "Mulberry", "cal": 45, "protein": 1.4, "carbs": 31.6, "fat": 7.6 },
            { "name": "Cranberry", "cal": 330, "protein": 16.7, "carbs": 18.0, "fat": 0.2 },
            { "name": "Gooseberry", "cal": 242, "protein": 28.1, "carbs": 34.1, "fat": 1.0 },
            { "name": "Tangerine", "cal": 274, "protein": 27.2, "carbs": 22.7, "fat": 3.2 },
            { "name": "Mandarin", "cal": 213, "protein": 2.3, "carbs": 8.3, "fat": 15.7 },
            { "name": "Clementine", "cal": 210, "protein": 13.2, "carbs": 41.4, "fat": 3.5 },
            { "name": "Blood Orange", "cal": 225, "protein": 3.6, "carbs": 33.3, "fat": 20.8 },
            { "name": "Pomelo", "cal": 294, "protein": 34.6, "carbs": 40.2, "fat": 23.4 },
            { "name": "Soursop", "cal": 274, "protein": 20.6, "carbs": 57.3, "fat": 16.4 },
            { "name": "Durian", "cal": 279, "protein": 24.5, "carbs": 54.8, "fat": 20.9 },
            { "name": "Longan", "cal": 176, "protein": 2.1, "carbs": 24.0, "fat": 1.8 },
            { "name": "Rambutan", "cal": 213, "protein": 12.2, "carbs": 47.7, "fat": 13.9 },
            { "name": "Persimmon", "cal": 106, "protein": 31.7, "carbs": 19.4, "fat": 21.0 },
            { "name": "Quince", "cal": 344, "protein": 21.6, "carbs": 53.8, "fat": 3.8 },
            { "name": "Ugli Fruit", "cal": 105, "protein": 11.8, "carbs": 35.5, "fat": 9.9 },
            { "name": "Boysenberry", "cal": 126, "protein": 31.7, "carbs": 39.4, "fat": 20.6 },
            { "name": "Elderberry", "cal": 170, "protein": 24.9, "carbs": 39.8, "fat": 19.8 },
            { "name": "Idli", "cal": 209, "protein": 15.5, "carbs": 12.0, "fat": 16.3 },
            { "name": "Plain Dosa", "cal": 94, "protein": 29.5, "carbs": 10.8, "fat": 6.7 },
            { "name": "Masala Dosa", "cal": 77, "protein": 21.3, "carbs": 56.4, "fat": 10.2 },
            { "name": "Rava Dosa", "cal": 237, "protein": 28.4, "carbs": 39.5, "fat": 20.3 },
            { "name": "Uttapam", "cal": 296, "protein": 2.2, "carbs": 50.4, "fat": 25.0 },
            { "name": "Upma", "cal": 255, "protein": 23.5, "carbs": 25.7, "fat": 16.0 },
            { "name": "Poha", "cal": 311, "protein": 28.4, "carbs": 57.7, "fat": 16.9 },
            { "name": "Sabudana Khichdi", "cal": 243, "protein": 4.4, "carbs": 11.1, "fat": 7.2 },
            { "name": "Aloo Paratha", "cal": 195, "protein": 25.7, "carbs": 52.4, "fat": 14.9 },
            { "name": "Paneer Paratha", "cal": 92, "protein": 14.0, "carbs": 30.1, "fat": 17.1 },
            { "name": "Gobi Paratha", "cal": 215, "protein": 0.7, "carbs": 17.9, "fat": 24.1 },
            { "name": "Methi Paratha", "cal": 266, "protein": 35.0, "carbs": 26.2, "fat": 21.6 },
            { "name": "Poori", "cal": 104, "protein": 22.9, "carbs": 16.5, "fat": 18.5 },
            { "name": "Bhatura", "cal": 40, "protein": 4.7, "carbs": 5.6, "fat": 18.2 },
            { "name": "Chole Bhature", "cal": 221, "protein": 24.1, "carbs": 9.0, "fat": 18.2 },
            { "name": "Pav Bhaji", "cal": 345, "protein": 16.1, "carbs": 26.8, "fat": 13.5 },
            { "name": "Vada", "cal": 120, "protein": 8.3, "carbs": 56.4, "fat": 16.7 },
            { "name": "Medu Vada", "cal": 234, "protein": 18.5, "carbs": 46.2, "fat": 3.1 },
            { "name": "Appam", "cal": 239, "protein": 12.7, "carbs": 47.2, "fat": 2.3 },
            { "name": "Puttu", "cal": 40, "protein": 23.7, "carbs": 8.9, "fat": 23.3 },
            { "name": "Sheera", "cal": 135, "protein": 6.2, "carbs": 19.5, "fat": 6.4 },
            { "name": "Halwa", "cal": 55, "protein": 12.9, "carbs": 38.7, "fat": 6.9 },
            { "name": "Besan Chilla", "cal": 123, "protein": 2.7, "carbs": 22.2, "fat": 16.4 },
            { "name": "Moong Dal Chilla", "cal": 147, "protein": 12.9, "carbs": 27.1, "fat": 5.6 },
            { "name": "Oats Porridge", "cal": 44, "protein": 10.9, "carbs": 44.4, "fat": 22.6 },
            { "name": "Vegetable Sandwich", "cal": 51, "protein": 19.2, "carbs": 48.0, "fat": 5.7 },
            { "name": "Cheese Sandwich", "cal": 273, "protein": 11.3, "carbs": 22.4, "fat": 4.5 },
            { "name": "Bread Omelette", "cal": 184, "protein": 20.2, "carbs": 36.6, "fat": 5.8 },
            { "name": "French Toast", "cal": 60, "protein": 18.5, "carbs": 32.7, "fat": 19.4 },
            { "name": "Cornflakes with Milk", "cal": 217, "protein": 21.2, "carbs": 31.5, "fat": 6.6 },
            { "name": "Muesli with Milk", "cal": 159, "protein": 17.2, "carbs": 26.9, "fat": 4.1 },
            { "name": "Smoothie Bowl", "cal": 118, "protein": 9.9, "carbs": 22.6, "fat": 18.4 },
            { "name": "Vegetable Omelette", "cal": 172, "protein": 5.8, "carbs": 26.7, "fat": 7.1 },
            { "name": "Egg Bhurji", "cal": 72, "protein": 33.4, "carbs": 7.4, "fat": 3.0 },
            { "name": "Scrambled Eggs", "cal": 61, "protein": 14.2, "carbs": 55.0, "fat": 19.3 },
            { "name": "Boiled Eggs", "cal": 117, "protein": 23.2, "carbs": 32.8, "fat": 16.8 },
            { "name": "Masala Omelette", "cal": 342, "protein": 34.9, "carbs": 57.9, "fat": 3.2 },
            { "name": "Vegetable Upma", "cal": 113, "protein": 24.4, "carbs": 28.2, "fat": 3.4 },
            { "name": "Tomato Uttapam", "cal": 295, "protein": 11.2, "carbs": 18.4, "fat": 14.1 },
            { "name": "Onion Uttapam", "cal": 338, "protein": 7.8, "carbs": 39.8, "fat": 22.3 },
            { "name": "Plain Paratha", "cal": 252, "protein": 17.0, "carbs": 21.4, "fat": 11.3 },
            { "name": "Butter Toast", "cal": 343, "protein": 1.7, "carbs": 32.5, "fat": 8.8 },
            { "name": "Jam Toast", "cal": 201, "protein": 6.8, "carbs": 48.7, "fat": 14.8 },
            { "name": "Banana Pancake", "cal": 243, "protein": 12.6, "carbs": 12.6, "fat": 7.9 },
            { "name": "Plain Pancake", "cal": 85, "protein": 4.6, "carbs": 20.5, "fat": 1.2 },
            { "name": "Masala Toast", "cal": 265, "protein": 28.0, "carbs": 24.9, "fat": 23.2 },
            { "name": "Cheese Toast", "cal": 323, "protein": 15.4, "carbs": 38.1, "fat": 23.0 },
            { "name": "Cooked Rice", "cal": 279, "protein": 9.8, "carbs": 7.6, "fat": 23.9 },
            { "name": "Jeera Rice", "cal": 292, "protein": 7.3, "carbs": 34.2, "fat": 13.4 },
            { "name": "Vegetable Pulao", "cal": 293, "protein": 8.8, "carbs": 32.8, "fat": 10.5 },
            { "name": "Veg Biryani", "cal": 194, "protein": 30.7, "carbs": 56.1, "fat": 11.5 },
            { "name": "Chicken Biryani", "cal": 163, "protein": 25.4, "carbs": 41.1, "fat": 13.6 },
            { "name": "Mutton Biryani", "cal": 132, "protein": 7.7, "carbs": 7.8, "fat": 17.0 },
            { "name": "Plain Roti", "cal": 250, "protein": 21.4, "carbs": 23.9, "fat": 8.4 },
            { "name": "Chapati", "cal": 140, "protein": 17.3, "carbs": 25.0, "fat": 7.9 },
            { "name": "Butter Roti", "cal": 108, "protein": 25.9, "carbs": 26.1, "fat": 12.4 },
            { "name": "Naan", "cal": 184, "protein": 35.0, "carbs": 21.4, "fat": 12.0 },
            { "name": "Butter Naan", "cal": 170, "protein": 17.6, "carbs": 5.9, "fat": 6.5 },
            { "name": "Plain Dal", "cal": 237, "protein": 27.1, "carbs": 6.5, "fat": 24.3 },
            { "name": "Dal Tadka", "cal": 334, "protein": 6.2, "carbs": 19.7, "fat": 20.1 },
            { "name": "Dal Makhani", "cal": 274, "protein": 25.2, "carbs": 18.7, "fat": 5.0 },
            { "name": "Rajma Curry", "cal": 176, "protein": 19.5, "carbs": 50.3, "fat": 19.6 },
            { "name": "Chole Curry", "cal": 153, "protein": 18.5, "carbs": 15.7, "fat": 6.1 },
            { "name": "Kadhi", "cal": 118, "protein": 9.8, "carbs": 30.5, "fat": 23.3 },
            { "name": "Vegetable Curry", "cal": 170, "protein": 3.8, "carbs": 47.9, "fat": 12.4 },
            { "name": "Paneer Butter Masala", "cal": 169, "protein": 24.7, "carbs": 50.9, "fat": 22.7 },
            { "name": "Shahi Paneer", "cal": 214, "protein": 7.8, "carbs": 9.1, "fat": 10.7 },
            { "name": "Palak Paneer", "cal": 328, "protein": 30.2, "carbs": 18.4, "fat": 14.1 },
            { "name": "Matar Paneer", "cal": 57, "protein": 11.9, "carbs": 59.0, "fat": 11.8 },
            { "name": "Aloo Gobi", "cal": 323, "protein": 6.4, "carbs": 35.9, "fat": 8.7 },
            { "name": "Mix Veg", "cal": 302, "protein": 29.9, "carbs": 23.3, "fat": 12.1 },
            { "name": "Bhindi Masala", "cal": 284, "protein": 13.6, "carbs": 51.3, "fat": 21.0 },
            { "name": "Baingan Bharta", "cal": 139, "protein": 22.6, "carbs": 30.5, "fat": 4.8 },
            { "name": "Vegetable Korma", "cal": 146, "protein": 23.0, "carbs": 7.2, "fat": 22.7 },
            { "name": "Sambar", "cal": 93, "protein": 31.7, "carbs": 46.3, "fat": 3.7 },
            { "name": "Rasam", "cal": 113, "protein": 30.2, "carbs": 32.5, "fat": 18.9 },
            { "name": "Curd Rice", "cal": 63, "protein": 11.9, "carbs": 32.4, "fat": 16.5 },
            { "name": "Lemon Rice", "cal": 187, "protein": 28.9, "carbs": 25.3, "fat": 20.5 },
            { "name": "Tamarind Rice", "cal": 250, "protein": 13.4, "carbs": 25.5, "fat": 21.8 },
            { "name": "Coconut Rice", "cal": 104, "protein": 1.7, "carbs": 46.3, "fat": 11.3 },
            { "name": "Khichdi", "cal": 277, "protein": 1.8, "carbs": 31.3, "fat": 3.1 },
            { "name": "Vegetable Khichdi", "cal": 158, "protein": 18.4, "carbs": 33.6, "fat": 22.2 },
            { "name": "Plain Khichdi", "cal": 112, "protein": 16.4, "carbs": 6.4, "fat": 11.7 },
            { "name": "Stuffed Capsicum", "cal": 309, "protein": 4.6, "carbs": 43.6, "fat": 11.6 },
            { "name": "Stuffed Tomato", "cal": 219, "protein": 20.7, "carbs": 54.4, "fat": 20.6 },
            { "name": "Vegetable Stew", "cal": 42, "protein": 22.6, "carbs": 49.9, "fat": 2.6 },
            { "name": "Vegetable Kofta", "cal": 217, "protein": 8.8, "carbs": 48.3, "fat": 4.5 },
            { "name": "Paneer Kofta", "cal": 201, "protein": 16.3, "carbs": 10.9, "fat": 19.8 },
            { "name": "Veg Fried Rice", "cal": 249, "protein": 19.3, "carbs": 56.2, "fat": 19.6 },
            { "name": "Egg Fried Rice", "cal": 334, "protein": 34.0, "carbs": 17.2, "fat": 17.2 },
            { "name": "Chicken Fried Rice", "cal": 130, "protein": 8.9, "carbs": 7.4, "fat": 2.0 },
            { "name": "Veg Hakka Noodles", "cal": 228, "protein": 8.8, "carbs": 13.5, "fat": 12.8 },
            { "name": "Chicken Noodles", "cal": 310, "protein": 30.1, "carbs": 21.6, "fat": 22.5 },
            { "name": "Veg Manchurian", "cal": 111, "protein": 2.6, "carbs": 15.3, "fat": 22.4 },
            { "name": "Gobi Manchurian", "cal": 185, "protein": 16.4, "carbs": 8.3, "fat": 13.7 },
            { "name": "Veg Pulao", "cal": 116, "protein": 1.8, "carbs": 10.8, "fat": 15.0 },
            { "name": "Mushroom Masala", "cal": 244, "protein": 21.0, "carbs": 55.0, "fat": 8.0 },
            { "name": "Mushroom Curry", "cal": 135, "protein": 31.6, "carbs": 5.0, "fat": 24.3 },
            { "name": "Paneer Bhurji", "cal": 134, "protein": 5.8, "carbs": 9.9, "fat": 24.6 },
            { "name": "Egg Curry", "cal": 208, "protein": 6.0, "carbs": 20.9, "fat": 7.6 },
            { "name": "Chicken Curry", "cal": 318, "protein": 15.1, "carbs": 53.1, "fat": 16.2 },
            { "name": "Butter Chicken", "cal": 82, "protein": 20.8, "carbs": 18.5, "fat": 22.7 },
            { "name": "Chicken Tikka Masala", "cal": 152, "protein": 17.0, "carbs": 26.9, "fat": 17.2 },
            { "name": "Fish Curry", "cal": 284, "protein": 5.8, "carbs": 20.5, "fat": 12.6 },
            { "name": "Fish Fry", "cal": 63, "protein": 32.7, "carbs": 41.1, "fat": 7.3 },
            { "name": "Samosa", "cal": 321, "protein": 20.7, "carbs": 6.1, "fat": 14.8 },
            { "name": "Veg Cutlet", "cal": 150, "protein": 15.7, "carbs": 23.8, "fat": 11.5 },
            { "name": "Paneer Cutlet", "cal": 245, "protein": 30.1, "carbs": 12.5, "fat": 14.3 },
            { "name": "Chicken Cutlet", "cal": 118, "protein": 18.5, "carbs": 37.8, "fat": 4.3 },
            { "name": "Pakora", "cal": 157, "protein": 32.3, "carbs": 36.4, "fat": 4.0 },
            { "name": "Onion Pakora", "cal": 340, "protein": 17.0, "carbs": 59.8, "fat": 8.0 },
            { "name": "Bread Pakora", "cal": 100, "protein": 8.6, "carbs": 44.7, "fat": 11.8 },
            { "name": "Spring Roll", "cal": 309, "protein": 8.8, "carbs": 59.0, "fat": 9.6 },
            { "name": "Veg Momos", "cal": 213, "protein": 8.1, "carbs": 53.1, "fat": 18.5 },
            { "name": "Chicken Momos", "cal": 224, "protein": 14.1, "carbs": 40.7, "fat": 21.4 },
            { "name": "Paneer Momos", "cal": 199, "protein": 19.7, "carbs": 19.2, "fat": 16.5 },
            { "name": "Veg Burger", "cal": 88, "protein": 14.7, "carbs": 15.7, "fat": 0.9 },
            { "name": "Chicken Burger", "cal": 139, "protein": 20.0, "carbs": 10.3, "fat": 14.9 },
            { "name": "Veg Pizza", "cal": 134, "protein": 8.5, "carbs": 53.6, "fat": 6.3 },
            { "name": "Cheese Pizza", "cal": 289, "protein": 16.9, "carbs": 41.1, "fat": 9.0 },
            { "name": "Paneer Pizza", "cal": 242, "protein": 20.4, "carbs": 30.5, "fat": 18.2 },
            { "name": "French Fries", "cal": 133, "protein": 4.5, "carbs": 39.9, "fat": 5.1 },
            { "name": "Sweet Corn Chaat", "cal": 277, "protein": 17.4, "carbs": 18.5, "fat": 19.4 },
            { "name": "Bhel Puri", "cal": 234, "protein": 11.7, "carbs": 6.1, "fat": 8.2 },
            { "name": "Sev Puri", "cal": 108, "protein": 24.4, "carbs": 53.6, "fat": 11.2 },
            { "name": "Pani Puri", "cal": 314, "protein": 27.9, "carbs": 17.6, "fat": 3.8 },
            { "name": "Dahi Puri", "cal": 74, "protein": 23.2, "carbs": 24.3, "fat": 8.9 },
            { "name": "Aloo Chaat", "cal": 199, "protein": 3.0, "carbs": 23.6, "fat": 23.6 },
            { "name": "Fruit Chaat", "cal": 226, "protein": 16.1, "carbs": 58.4, "fat": 7.3 },
            { "name": "Peanut Chaat", "cal": 171, "protein": 6.1, "carbs": 40.3, "fat": 8.9 },
            { "name": "Roasted Chana", "cal": 237, "protein": 13.8, "carbs": 14.6, "fat": 14.4 },
            { "name": "Popcorn", "cal": 224, "protein": 20.0, "carbs": 59.8, "fat": 18.5 },
            { "name": "Nachos with Salsa", "cal": 316, "protein": 20.1, "carbs": 12.5, "fat": 17.2 },
            { "name": "Nachos with Cheese", "cal": 319, "protein": 7.3, "carbs": 51.1, "fat": 4.1 },
            { "name": "Milk", "cal": 280, "protein": 22.3, "carbs": 17.2, "fat": 5.5 },
            { "name": "Toned Milk", "cal": 169, "protein": 33.9, "carbs": 51.3, "fat": 20.6 },
            { "name": "Skim Milk", "cal": 244, "protein": 16.6, "carbs": 27.3, "fat": 5.7 },
            { "name": "Curd", "cal": 129, "protein": 3.0, "carbs": 11.8, "fat": 18.6 },
            { "name": "Greek Yogurt", "cal": 100, "protein": 31.6, "carbs": 13.5, "fat": 16.7 },
            { "name": "Buttermilk", "cal": 200, "protein": 22.4, "carbs": 22.3, "fat": 19.9 },
            { "name": "Lassi", "cal": 40, "protein": 27.4, "carbs": 8.3, "fat": 7.7 },
            { "name": "Sweet Lassi", "cal": 304, "protein": 2.3, "carbs": 54.6, "fat": 16.0 },
            { "name": "Paneer", "cal": 170, "protein": 25.4, "carbs": 20.5, "fat": 8.4 },
            { "name": "Cheese", "cal": 60, "protein": 17.4, "carbs": 34.3, "fat": 5.0 },
            { "name": "Butter", "cal": 151, "protein": 6.3, "carbs": 37.0, "fat": 12.1 },
            { "name": "Ghee", "cal": 125, "protein": 11.3, "carbs": 25.8, "fat": 10.9 },
            { "name": "Ice Cream Vanilla", "cal": 217, "protein": 32.4, "carbs": 37.0, "fat": 12.7 },
            { "name": "Ice Cream Chocolate", "cal": 138, "protein": 29.8, "carbs": 6.4, "fat": 25.0 },
            { "name": "Kulfi", "cal": 141, "protein": 25.8, "carbs": 44.2, "fat": 9.0 },
            { "name": "Milkshake Vanilla", "cal": 281, "protein": 0.9, "carbs": 45.4, "fat": 14.4 },
            { "name": "Milkshake Chocolate", "cal": 269, "protein": 26.5, "carbs": 54.2, "fat": 5.4 },
            { "name": "Fruit Yogurt", "cal": 249, "protein": 17.2, "carbs": 17.2, "fat": 1.5 },
            { "name": "Flavored Yogurt", "cal": 315, "protein": 19.6, "carbs": 40.8, "fat": 12.6 },
            { "name": "Cheese Slice", "cal": 93, "protein": 23.9, "carbs": 18.7, "fat": 5.6 }
        ];

        // Data for the planner - EXPANDED VERSION with real food integration
        const plannerData = {
            currentDay: 1,
            totalDays: 14,
            dietPreference: 'balanced',
            isVegetarian: false,
            targetCalories: 2300,
            days: [],
            
            // User data for calorie calculation
            userData: {
                age: 28,
                gender: 'male',
                height: 175,
                weight: 75,
                activity: 1.55,
                goal: 'lose',
                targetWeightChange: 5,
                weeks: 8,
                bmr: 0,
                tdee: 0,
                dailyCalorieTarget: 0,
                dailyCalorieDeficit: 0
            },
            
            // Cuisine types with proper distribution
            cuisineTypes: ['South Indian', 'North Indian', 'Continental', 'Regular', 'Mediterranean', 'Asian', 'Mexican'],
            
            // Categorized food items from food-data.js
            foodCategories: {
                fruits: [
                    'Apple', 'Banana', 'Orange', 'Mango', 'Papaya', 'Guava', 'Grapes', 'Pineapple', 'Watermelon',
                    'Muskmelon', 'Pear', 'Peach', 'Plum', 'Kiwi', 'Strawberry', 'Blueberry', 'Raspberry',
                    'Blackberry', 'Pomegranate', 'Fig', 'Dates', 'Cherries', 'Apricot', 'Avocado', 'Custard Apple',
                    'Lychee', 'Jackfruit', 'Dragon Fruit', 'Coconut Meat', 'Sapota', 'Star Fruit', 'Passion Fruit',
                    'Mulberry', 'Cranberry', 'Gooseberry', 'Tangerine', 'Mandarin', 'Clementine', 'Blood Orange',
                    'Pomelo', 'Soursop', 'Durian', 'Longan', 'Rambutan', 'Persimmon', 'Quince', 'Ugli Fruit',
                    'Boysenberry', 'Elderberry'
                ],
                breakfastIndian: [
                    'Idli', 'Plain Dosa', 'Masala Dosa', 'Rava Dosa', 'Uttapam', 'Upma', 'Poha', 'Sabudana Khichdi',
                    'Aloo Paratha', 'Paneer Paratha', 'Gobi Paratha', 'Methi Paratha', 'Poori', 'Bhatura',
                    'Chole Bhature', 'Pav Bhaji', 'Vada', 'Medu Vada', 'Appam', 'Puttu', 'Sheera', 'Halwa',
                    'Besan Chilla', 'Moong Dal Chilla', 'Oats Porridge', 'Vegetable Sandwich', 'Cheese Sandwich',
                    'Bread Omelette', 'French Toast', 'Cornflakes with Milk', 'Muesli with Milk', 'Smoothie Bowl',
                    'Vegetable Omelette', 'Egg Bhurji', 'Scrambled Eggs', 'Boiled Eggs', 'Masala Omelette',
                    'Vegetable Upma', 'Tomato Uttapam', 'Onion Uttapam', 'Plain Paratha', 'Butter Toast',
                    'Jam Toast', 'Banana Pancake', 'Plain Pancake', 'Masala Toast', 'Cheese Toast'
                ],
                lunchDinnerIndian: [
                    'Cooked Rice', 'Jeera Rice', 'Vegetable Pulao', 'Veg Biryani', 'Chicken Biryani', 'Mutton Biryani',
                    'Plain Roti', 'Chapati', 'Butter Roti', 'Naan', 'Butter Naan', 'Plain Dal', 'Dal Tadka',
                    'Dal Makhani', 'Rajma Curry', 'Chole Curry', 'Kadhi', 'Vegetable Curry', 'Paneer Butter Masala',
                    'Shahi Paneer', 'Palak Paneer', 'Matar Paneer', 'Aloo Gobi', 'Mix Veg', 'Bhindi Masala',
                    'Baingan Bharta', 'Vegetable Korma', 'Sambar', 'Rasam', 'Curd Rice', 'Lemon Rice', 'Tamarind Rice',
                    'Coconut Rice', 'Khichdi', 'Vegetable Khichdi', 'Plain Khichdi', 'Stuffed Capsicum',
                    'Stuffed Tomato', 'Vegetable Stew', 'Vegetable Kofta', 'Paneer Kofta'
                ],
                asianFusion: [
                    'Veg Fried Rice', 'Egg Fried Rice', 'Chicken Fried Rice', 'Veg Hakka Noodles', 'Chicken Noodles',
                    'Veg Manchurian', 'Gobi Manchurian', 'Veg Pulao', 'Mushroom Masala', 'Mushroom Curry',
                    'Paneer Bhurji', 'Egg Curry', 'Chicken Curry', 'Butter Chicken', 'Chicken Tikka Masala',
                    'Fish Curry', 'Fish Fry'
                ],
                snacks: [
                    'Samosa', 'Veg Cutlet', 'Paneer Cutlet', 'Chicken Cutlet', 'Pakora', 'Onion Pakora',
                    'Bread Pakora', 'Spring Roll', 'Veg Momos', 'Chicken Momos', 'Paneer Momos', 'Veg Burger',
                    'Chicken Burger', 'Veg Pizza', 'Cheese Pizza', 'Paneer Pizza', 'French Fries',
                    'Sweet Corn Chaat', 'Bhel Puri', 'Sev Puri', 'Pani Puri', 'Dahi Puri', 'Aloo Chaat',
                    'Fruit Chaat', 'Peanut Chaat', 'Roasted Chana', 'Popcorn', 'Nachos with Salsa',
                    'Nachos with Cheese'
                ],
                dairy: [
                    'Milk', 'Toned Milk', 'Skim Milk', 'Curd', 'Greek Yogurt', 'Buttermilk', 'Lassi',
                    'Sweet Lassi', 'Paneer', 'Cheese', 'Butter', 'Ghee', 'Ice Cream Vanilla',
                    'Ice Cream Chocolate', 'Kulfi', 'Milkshake Vanilla', 'Milkshake Chocolate',
                    'Fruit Yogurt', 'Flavored Yogurt', 'Cheese Slice'
                ]
            },
            
            // Cuisine-based food selection (now uses real food items)
            cuisineFoodMapping: {
                'South Indian': {
                    breakfast: ['Idli', 'Plain Dosa', 'Masala Dosa', 'Rava Dosa', 'Uttapam', 'Poha', 'Upma', 'Appam', 'Puttu'],
                    lunch: ['Cooked Rice', 'Sambar', 'Rasam', 'Curd Rice', 'Lemon Rice', 'Tamarind Rice', 'Coconut Rice'],
                    snack: ['Vada', 'Medu Vada', 'Bonda', 'Banana', 'Apple', 'Orange'],
                    dinner: ['Chapati', 'Vegetable Curry', 'Dal', 'Rice', 'Curd']
                },
                'North Indian': {
                    breakfast: ['Aloo Paratha', 'Paneer Paratha', 'Gobi Paratha', 'Methi Paratha', 'Poori', 'Chole Bhature', 'Pav Bhaji'],
                    lunch: ['Chapati', 'Plain Roti', 'Naan', 'Butter Naan', 'Rajma Curry', 'Chole Curry', 'Paneer Butter Masala', 'Palak Paneer'],
                    snack: ['Samosa', 'Pakora', 'Onion Pakora', 'Bread Pakora', 'Fruit Chaat'],
                    dinner: ['Rice', 'Dal', 'Vegetable Curry', 'Mix Veg', 'Curd']
                },
                'Continental': {
                    breakfast: ['Scrambled Eggs', 'Boiled Eggs', 'Vegetable Omelette', 'Masala Omelette', 'French Toast', 'Cornflakes with Milk', 'Muesli with Milk'],
                    lunch: ['Vegetable Sandwich', 'Cheese Sandwich', 'Veg Burger', 'Chicken Burger', 'Salad'],
                    snack: ['Apple', 'Banana', 'Orange', 'Greek Yogurt', 'Fruit Yogurt'],
                    dinner: ['Grilled Chicken', 'Fish', 'Steamed Vegetables', 'Quinoa', 'Brown Rice']
                },
                'Regular': {
                    breakfast: ['Oats Porridge', 'Vegetable Sandwich', 'Boiled Eggs', 'Fruit Bowl', 'Milk'],
                    lunch: ['Chapati', 'Rice', 'Dal', 'Vegetable Curry', 'Salad'],
                    snack: ['Fruits', 'Nuts', 'Yogurt'],
                    dinner: ['Light Soup', 'Grilled Vegetables', 'Rice', 'Dal']
                },
                'Mediterranean': {
                    breakfast: ['Greek Yogurt', 'Fruit Bowl', 'Whole Grain Bread', 'Cheese'],
                    lunch: ['Salad', 'Hummus', 'Pita', 'Grilled Vegetables', 'Olives'],
                    snack: ['Cucumber', 'Carrots', 'Almonds', 'Walnuts'],
                    dinner: ['Grilled Fish', 'Chicken', 'Vegetable Stew', 'Quinoa']
                },
                'Asian': {
                    breakfast: ['Congee', 'Steamed Buns', 'Miso Soup', 'Rice'],
                    lunch: ['Veg Fried Rice', 'Egg Fried Rice', 'Chicken Fried Rice', 'Veg Hakka Noodles', 'Chicken Noodles'],
                    snack: ['Spring Roll', 'Veg Momos', 'Chicken Momos', 'Paneer Momos'],
                    dinner: ['Veg Manchurian', 'Gobi Manchurian', 'Veg Pulao', 'Mushroom Masala']
                },
                'Mexican': {
                    breakfast: ['Breakfast Burrito', 'Huevos Rancheros', 'Avocado Toast'],
                    lunch: ['Veg Burger', 'Chicken Burger', 'Veg Pizza', 'Cheese Pizza', 'Nachos with Salsa'],
                    snack: ['Nachos with Cheese', 'Guacamole', 'Salsa', 'Chips'],
                    dinner: ['Tacos', 'Fajitas', 'Enchiladas', 'Quesadilla']
                }
            },
            
            // Meal plans for different cuisines (expanded with real food combinations)
            mealPlans: {
                'South Indian': {
                    breakfast: [
                        'Idli (3 pieces) with Sambar and Coconut Chutney',
                        'Masala Dosa (1) with Sambar and Chutney',
                        'Poha with Peanuts and Lemon',
                        'Upma with Vegetables and Coconut',
                        'Rava Dosa (1) with Sambar'
                    ],
                    lunch: [
                        'Rice + Sambar + Rasam + Vegetables + Papad',
                        'Rice + Sambar + Curd + Pickle',
                        'Rice + Sambar + Beans Poriyal',
                        'Rice + Sambar + Avial',
                        'Rice + Sambar + Potato Fry'
                    ],
                    snack: [
                        'Medu Vada (2) with Coconut Chutney',
                        'Bonda (2) with Sambar',
                        'Banana (1) with Curd',
                        'Fruit Chaat (1 bowl)',
                        'Roasted Chana (1 bowl)'
                    ],
                    dinner: [
                        'Chapati (2) + Vegetable Curry + Curd',
                        'Rice + Sambar + Pickle',
                        'Dosa (2) with Chutney',
                        'Rice + Curd + Pickle',
                        'Chapati + Dal Fry'
                    ]
                },
                'North Indian': {
                    breakfast: [
                        'Aloo Paratha (2) with Curd and Pickle',
                        'Poha with Peanuts and Lemon',
                        'Besan Chilla with Green Chutney',
                        'Chole Bhature (2 pieces)',
                        'Vegetable Sandwich (2 slices)'
                    ],
                    lunch: [
                        'Chapati (3) + Dal + Vegetables + Salad',
                        'Rice + Rajma + Salad + Raita',
                        'Chapati + Paneer Butter Masala + Rice',
                        'Rice + Chole + Salad',
                        'Chapati + Mix Veg + Dal'
                    ],
                    snack: [
                        'Samosa (1) with Chutney',
                        'Pakora (4-5) with Tea',
                        'Fruit Chaat (1 bowl)',
                        'Dhokla (4 pieces)',
                        'Bread Pakora (2 pieces)'
                    ],
                    dinner: [
                        'Chapati (2) + Mixed Vegetables + Dal',
                        'Rice + Dal + Salad',
                        'Chapati + Chicken Curry',
                        'Rice + Vegetable Pulao + Raita',
                        'Chapati + Baingan Bharta'
                    ]
                },
                'Continental': {
                    breakfast: [
                        'Scrambled Eggs (2) with Toast (2 slices)',
                        'Boiled Eggs (2) with Whole Wheat Toast',
                        'Vegetable Omelette with Toast',
                        'French Toast (2 slices) with Berries',
                        'Cornflakes with Milk (1 bowl)'
                    ],
                    lunch: [
                        'Grilled Chicken Salad with Olive Dressing',
                        'Quinoa Bowl with Roasted Vegetables',
                        'Fish with Steamed Vegetables',
                        'Pasta with Tomato Sauce and Salad',
                        'Turkey Sandwich with Side Salad'
                    ],
                    snack: [
                        'Apple (1 medium) with Peanut Butter',
                        'Greek Yogurt (1 cup) with Berries',
                        'Mixed Nuts (handful)',
                        'Protein Shake (1 glass)',
                        'Fruit Smoothie (1 glass)'
                    ],
                    dinner: [
                        'Grilled Salmon with Asparagus',
                        'Lean Steak with Sweet Potato Mash',
                        'Stir-fry Tofu with Brown Rice',
                        'Roast Chicken with Vegetables',
                        'Vegetable Lasagna with Side Salad'
                    ]
                },
                'Regular': {
                    breakfast: [
                        'Oats Porridge (1 bowl) with Milk and Banana',
                        'Eggs (2) with Whole Wheat Toast',
                        'Fruit Bowl with Yogurt and Nuts',
                        'Cereal with Milk and Berries',
                        'Smoothie with Spinach and Banana'
                    ],
                    lunch: [
                        'Rice + Lentils + Mixed Vegetables',
                        'Chapati + Chicken/Vegetable Curry + Salad',
                        'Salad with Grilled Protein',
                        'Rice + Dal + Sabzi + Salad',
                        'Whole Wheat Sandwich with Vegetables'
                    ],
                    snack: [
                        'Fresh Fruits (Apple/Banana/Orange)',
                        'Handful of Nuts (Almonds/Walnuts)',
                        'Protein Bar (1)',
                        'Yogurt with Honey',
                        'Roasted Chana (1 bowl)'
                    ],
                    dinner: [
                        'Light Soup with Whole Wheat Toast',
                        'Grilled Vegetables with Protein Source',
                        'Rice + Dal + Salad',
                        'Chapati + Vegetable Curry',
                        'Salad with Boiled Eggs'
                    ]
                },
                'Mediterranean': {
                    breakfast: [
                        'Greek Yogurt with Honey and Walnuts',
                        'Feta Cheese Omelette with Olives',
                        'Whole Grain Bread with Olive Oil',
                        'Shakshuka with Feta',
                        'Avocado and Feta Toast'
                    ],
                    lunch: [
                        'Greek Salad with Grilled Chicken',
                        'Hummus with Pita and Vegetables',
                        'Mediterranean Bowl with Quinoa',
                        'Falafel Wrap with Tahini',
                        'Grilled Fish with Lemon and Herbs'
                    ],
                    snack: [
                        'Olives with Feta Cheese',
                        'Cucumber Sticks with Tzatziki',
                        'Almonds and Dates',
                        'Stuffed Olives',
                        'Greek Yogurt Dip with Pita Chips'
                    ],
                    dinner: [
                        'Grilled Fish with Lemon and Olive Oil',
                        'Chicken Souvlaki with Tzatziki',
                        'Stuffed Bell Peppers with Rice',
                        'Moussaka with Side Salad',
                        'Greek-style Grilled Vegetables'
                    ]
                },
                'Asian': {
                    breakfast: [
                        'Congee (Rice Porridge) with Toppings',
                        'Steamed Buns with Fillings',
                        'Miso Soup with Rice',
                        'Dim Sum Selection',
                        'Rice Noodles with Vegetables'
                    ],
                    lunch: [
                        'Veg Fried Rice with Vegetables',
                        'Egg Fried Rice with Peas',
                        'Chicken Fried Rice',
                        'Veg Hakka Noodles',
                        'Chicken Noodles'
                    ],
                    snack: [
                        'Spring Roll (2 pieces)',
                        'Veg Momos (4 pieces)',
                        'Chicken Momos (4 pieces)',
                        'Paneer Momos (4 pieces)',
                        'Edamame with Sea Salt'
                    ],
                    dinner: [
                        'Veg Manchurian with Fried Rice',
                        'Gobi Manchurian with Noodles',
                        'Veg Pulao with Raita',
                        'Mushroom Masala with Rice',
                        'Paneer Bhurji with Roti'
                    ]
                },
                'Mexican': {
                    breakfast: [
                        'Breakfast Burrito with Eggs',
                        'Huevos Rancheros with Tortillas',
                        'Chilaquiles with Salsa',
                        'Mexican Omelette with Avocado',
                        'Breakfast Quesadilla'
                    ],
                    lunch: [
                        'Chicken/Bean Burrito Bowl',
                        'Tacos (3) with Various Fillings',
                        'Quesadilla with Guacamole',
                        'Enchiladas with Rice and Beans',
                        'Tostadas with Toppings'
                    ],
                    snack: [
                        'Nachos with Salsa',
                        'Nachos with Cheese',
                        'Guacamole with Tortilla Chips',
                        'Mexican Street Corn',
                        'Jicama Sticks with Lime'
                    ],
                    dinner: [
                        'Fajitas with Tortillas and Fixings',
                        'Enchiladas Verde with Rice',
                        'Tostadas with Refried Beans',
                        'Mexican-style Grilled Chicken',
                        'Vegetable Quesadilla'
                    ]
                }
            },
            
            // Meat dishes for non-vegetarians (using real food items)
            meatDishes: [
                'Chicken Curry', 'Butter Chicken', 'Chicken Tikka Masala', 'Chicken Biryani',
                'Mutton Biryani', 'Fish Curry', 'Fish Fry', 'Chicken Cutlet', 'Chicken Momos',
                'Chicken Burger', 'Chicken Fried Rice', 'Chicken Noodles', 'Grilled Chicken',
                'Roast Chicken', 'Chicken Souvlaki', 'Chicken Wings'
            ],
            
            // Vegetarian protein alternatives
            vegetarianProteins: [
                'Paneer Butter Masala', 'Palak Paneer', 'Matar Paneer', 'Paneer Kofta',
                'Paneer Cutlet', 'Paneer Momos', 'Paneer Pizza', 'Paneer Bhurji',
                'Rajma Curry', 'Chole Curry', 'Dal Makhani', 'Dal Tadka',
                'Vegetable Kofta', 'Veg Manchurian', 'Gobi Manchurian'
            ],
            
            // Exercise recommendations with more variety
            exercises: {
                cardio: [
                    { name: 'Morning Walk', duration: '30min', calories: 220, type: 'cardio' },
                    { name: 'Jogging/Running', duration: '30min', calories: 300, type: 'cardio' },
                    { name: 'Cycling', duration: '45min', calories: 400, type: 'cardio' },
                    { name: 'Swimming', duration: '45min', calories: 450, type: 'cardio' },
                    { name: 'Jump Rope', duration: '20min', calories: 250, type: 'cardio' },
                    { name: 'Elliptical Training', duration: '30min', calories: 280, type: 'cardio' },
                    { name: 'Stair Climbing', duration: '25min', calories: 320, type: 'cardio' },
                    { name: 'Rowing Machine', duration: '30min', calories: 350, type: 'cardio' },
                    { name: 'Zumba/Dance', duration: '45min', calories: 380, type: 'cardio' },
                    { name: 'Hiking', duration: '60min', calories: 420, type: 'cardio' }
                ],
                strength: [
                    { name: 'Strength Training', duration: '45min', calories: 320, type: 'strength' },
                    { name: 'Bodyweight Workout', duration: '30min', calories: 280, type: 'strength' },
                    { name: 'Weight Lifting', duration: '60min', calories: 350, type: 'strength' },
                    { name: 'Resistance Band Workout', duration: '40min', calories: 250, type: 'strength' },
                    { name: 'Kettlebell Training', duration: '30min', calories: 300, type: 'strength' },
                    { name: 'Push-ups & Sit-ups', duration: '25min', calories: 200, type: 'strength' },
                    { name: 'Pull-ups & Dips', duration: '30min', calories: 280, type: 'strength' },
                    { name: 'Squats & Lunges', duration: '25min', calories: 220, type: 'strength' },
                    { name: 'Deadlifts & Bench Press', duration: '45min', calories: 320, type: 'strength' },
                    { name: 'Full Body Circuit', duration: '40min', calories: 340, type: 'strength' }
                ],
                flexibility: [
                    { name: 'Yoga Flow', duration: '50min', calories: 250, type: 'flexibility' },
                    { name: 'Pilates', duration: '45min', calories: 200, type: 'flexibility' },
                    { name: 'Stretching Routine', duration: '20min', calories: 100, type: 'flexibility' },
                    { name: 'Tai Chi', duration: '40min', calories: 180, type: 'flexibility' },
                    { name: 'Dynamic Stretching', duration: '15min', calories: 80, type: 'flexibility' },
                    { name: 'Mobility Drills', duration: '20min', calories: 90, type: 'flexibility' },
                    { name: 'Foam Rolling', duration: '15min', calories: 70, type: 'flexibility' },
                    { name: 'Balance Exercises', duration: '20min', calories: 100, type: 'flexibility' },
                    { name: 'Gentle Flow Yoga', duration: '45min', calories: 220, type: 'flexibility' },
                    { name: 'Restorative Yoga', duration: '50min', calories: 180, type: 'flexibility' }
                ],
                hiit: [
                    { name: 'HIIT Workout', duration: '25min', calories: 350, type: 'hiit' },
                    { name: 'Tabata Training', duration: '20min', calories: 300, type: 'hiit' },
                    { name: 'Circuit Training', duration: '40min', calories: 400, type: 'hiit' },
                    { name: 'Burpee Challenge', duration: '15min', calories: 200, type: 'hiit' },
                    { name: 'CrossFit WOD', duration: '30min', calories: 380, type: 'hiit' },
                    { name: 'Sprint Intervals', duration: '25min', calories: 320, type: 'hiit' },
                    { name: 'Bootcamp Style', duration: '45min', calories: 420, type: 'hiit' },
                    { name: 'Boxing HIIT', duration: '30min', calories: 350, type: 'hiit' },
                    { name: 'Plyometric Circuit', duration: '25min', calories: 300, type: 'hiit' },
                    { name: 'EMOM Workout', duration: '20min', calories: 280, type: 'hiit' }
                ],
                yoga: [
                    { name: 'Suryanamaskar (Sun Salutation)', duration: '20min', calories: 180, type: 'yoga' },
                    { name: 'Hatha Yoga', duration: '45min', calories: 240, type: 'yoga' },
                    { name: 'Vinyasa Flow', duration: '50min', calories: 280, type: 'yoga' },
                    { name: 'Ashtanga Yoga', duration: '60min', calories: 320, type: 'yoga' },
                    { name: 'Iyengar Yoga', duration: '45min', calories: 220, type: 'yoga' },
                    { name: 'Kundalini Yoga', duration: '50min', calories: 260, type: 'yoga' },
                    { name: 'Power Yoga', duration: '45min', calories: 300, type: 'yoga' },
                    { name: 'Yin Yoga', duration: '40min', calories: 180, type: 'yoga' },
                    { name: 'Restorative Yoga', duration: '45min', calories: 160, type: 'yoga' },
                    { name: 'Meditation & Pranayama', duration: '30min', calories: 120, type: 'yoga' }
                ]
            },
            
            // Exercise alternatives for swapping
            exerciseAlternatives: {
                'Morning Walk': ['Cycling', 'Swimming', 'Elliptical Trainer', 'Stair Climbing', 'Light Jogging'],
                'Strength Training': ['Bodyweight Workout', 'Resistance Band Workout', 'Kettlebell Training', 'Pilates', 'Yoga Strength'],
                'Yoga Flow': ['Pilates', 'Stretching Routine', 'Tai Chi', 'Meditation Walk', 'Suryanamaskar'],
                'HIIT Workout': ['Circuit Training', 'Tabata Training', 'CrossFit WOD', 'Bootcamp', 'Sprint Intervals'],
                'Suryanamaskar (Sun Salutation)': ['Vinyasa Yoga', 'Hatha Yoga', 'Power Yoga', 'Dynamic Stretching', 'Morning Walk']
            }
        };

        // Theme Management
        const themeSwitch = document.getElementById('themeSwitch');
        const html = document.documentElement;

        // Load saved theme or detect OS preference
        const savedTheme = localStorage.getItem('fitsphere-theme') || 
            (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        
        html.setAttribute('data-theme', savedTheme);

        // Toggle theme
        themeSwitch.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('fitsphere-theme', newTheme);
        });

        // Mobile Menu
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');

        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            menuToggle.innerHTML = navLinks.classList.contains('active') 
                ? '<i class="fas fa-times"></i>' 
                : '<i class="fas fa-bars"></i>';
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!navLinks.contains(e.target) && !menuToggle.contains(e.target)) {
                navLinks.classList.remove('active');
                menuToggle.innerHTML = '<i class="fas fa-bars"></i>';
            }
        });

        // Calculate BMR using Mifflin-St Jeor Equation
        function calculateBMR(age, gender, height, weight) {
            if (gender === 'male') {
                return 10 * weight + 6.25 * height - 5 * age + 5;
            } else {
                return 10 * weight + 6.25 * height - 5 * age - 161;
            }
        }

        // Calculate TDEE (Total Daily Energy Expenditure)
        function calculateTDEE(bmr, activityLevel) {
            return bmr * activityLevel;
        }

        // Calculate daily calorie target based on goal
        function calculateDailyCalorieTarget(userData) {
            const tdee = userData.tdee;
            const totalDays = userData.weeks * 7;
            const targetWeightChange = userData.targetWeightChange;
            
            // Calculate total calorie deficit/surplus needed
            // 7700 calories = 1 kg of weight
            const totalCalorieChange = targetWeightChange * 7700;
            
            // Daily calorie change needed
            const dailyCalorieChange = totalCalorieChange / totalDays;
            
            if (userData.goal === 'lose') {
                return tdee - dailyCalorieChange;
            } else if (userData.goal === 'gain') {
                return tdee + dailyCalorieChange;
            } else {
                return tdee; // maintain
            }
        }

        // Find food item in foodData
        function findFoodItem(name) {
            // Try exact match first
            let food = foodData.find(item => item.name === name);
            
            // If not found, try partial match
            if (!food) {
                food = foodData.find(item => 
                    item.name.toLowerCase().includes(name.toLowerCase()) ||
                    name.toLowerCase().includes(item.name.toLowerCase())
                );
            }
            
            // If still not found, return a default
            if (!food) {
                console.warn(`Food item not found: ${name}. Using default values.`);
                return {
                    name: name,
                    cal: getRandomCalories(200, 400),
                    protein: getRandomCalories(5, 20),
                    carbs: getRandomCalories(20, 50),
                    fat: getRandomCalories(5, 20)
                };
            }
            
            return food;
        }

        // Generate a diversified 14-day plan with real food integration
        function generate14DayPlan() {
            // Store user data for calculations
            plannerData.userData.age = parseInt(document.getElementById('age').value);
            plannerData.userData.gender = document.getElementById('gender').value;
            plannerData.userData.height = parseInt(document.getElementById('height').value);
            plannerData.userData.weight = parseFloat(document.getElementById('weight').value);
            plannerData.userData.activity = parseFloat(document.getElementById('activity').value);
            plannerData.userData.goal = document.getElementById('goal').value;
            plannerData.userData.targetWeightChange = parseFloat(document.getElementById('target').value);
            plannerData.userData.weeks = parseInt(document.getElementById('weeks').value);
            
            // Calculate BMR and TDEE
            plannerData.userData.bmr = calculateBMR(
                plannerData.userData.age,
                plannerData.userData.gender,
                plannerData.userData.height,
                plannerData.userData.weight
            );
            
            plannerData.userData.tdee = calculateTDEE(
                plannerData.userData.bmr,
                plannerData.userData.activity
            );
            
            // Calculate daily calorie target
            plannerData.userData.dailyCalorieTarget = calculateDailyCalorieTarget(plannerData.userData);
            
            // Calculate daily calorie deficit/surplus
            if (plannerData.userData.goal === 'lose') {
                plannerData.userData.dailyCalorieDeficit = plannerData.userData.tdee - plannerData.userData.dailyCalorieTarget;
            } else if (plannerData.userData.goal === 'gain') {
                plannerData.userData.dailyCalorieDeficit = plannerData.userData.dailyCalorieTarget - plannerData.userData.tdee;
            } else {
                plannerData.userData.dailyCalorieDeficit = 0;
            }
            
            // Update target calories display
            plannerData.targetCalories = Math.round(plannerData.userData.dailyCalorieTarget);
            
            const dietPreference = document.getElementById('dietPreference').value;
            const isVegetarian = dietPreference === 'veg';
            plannerData.dietPreference = dietPreference;
            plannerData.isVegetarian = isVegetarian;
            
            // Reset days array
            plannerData.days = [];
            
            // Distribute cuisine types evenly (no more than 2 consecutive days of same cuisine)
            let cuisineDistribution = [];
            const totalDays = 14;
            
            // Calculate how many times each cuisine should appear
            const cuisineCount = Math.floor(totalDays / plannerData.cuisineTypes.length);
            let remainingDays = totalDays % plannerData.cuisineTypes.length;
            
            // Create initial distribution
            plannerData.cuisineTypes.forEach(cuisine => {
                for (let i = 0; i < cuisineCount; i++) {
                    cuisineDistribution.push(cuisine);
                }
            });
            
            // Add remaining days with random cuisines
            for (let i = 0; i < remainingDays; i++) {
                cuisineDistribution.push(plannerData.cuisineTypes[i]);
            }
            
            // Shuffle the distribution
            cuisineDistribution = shuffleArray(cuisineDistribution);
            
            // Ensure no more than 2 consecutive days of same cuisine
            cuisineDistribution = avoidConsecutiveDuplicates(cuisineDistribution, 2);
            
            // Add meat days for non-vegetarians (at least 4 days in 14)
            const meatDays = isVegetarian ? [] : getRandomIndices(totalDays, 4, 6);
            
            // Generate each day's plan
            for (let day = 1; day <= totalDays; day++) {
                const cuisine = cuisineDistribution[day - 1];
                const hasMeat = meatDays.includes(day - 1);
                
                const dayPlan = {
                    day: day,
                    cuisine: cuisine,
                    hasMeat: hasMeat,
                    meals: generateDailyMeals(cuisine, hasMeat, isVegetarian),
                    exercises: generateDailyExercises(day)
                };
                
                plannerData.days.push(dayPlan);
            }
        }

        // Generate daily meals based on cuisine with real food integration
        function generateDailyMeals(cuisine, hasMeat, isVegetarian) {
            const meals = [];
            const cuisinePlan = plannerData.mealPlans[cuisine];
            
            // Get real food combinations for each meal
            const breakfast = getRandomItem(cuisinePlan.breakfast);
            const lunch = getRandomItem(cuisinePlan.lunch);
            const snack = getRandomItem(cuisinePlan.snack);
            let dinner = getRandomItem(cuisinePlan.dinner);
            
            // For non-vegetarians on meat days, add meat dishes
            if (hasMeat && !isVegetarian) {
                // Replace or add meat dish to dinner
                const meatDish = getRandomItem(plannerData.meatDishes);
                if (dinner.includes('Chicken') || dinner.includes('Meat') || dinner.includes('Protein')) {
                    dinner = dinner.replace('Chicken', meatDish)
                                  .replace('Meat', meatDish)
                                  .replace('Protein', meatDish);
                } else {
                    dinner += ` + ${meatDish}`;
                }
            }
            
            // For vegetarians, ensure protein sources
            if (isVegetarian) {
                const vegProtein = getRandomItem(plannerData.vegetarianProteins);
                if (!lunch.includes('Paneer') && !lunch.includes('Dal') && !lunch.includes('Rajma') && !lunch.includes('Chole')) {
                    // Add vegetarian protein to lunch
                    if (Math.random() > 0.5) {
                        meals.push({
                            name: `Lunch: ${lunch} + ${vegProtein}`,
                            calories: calculateMealCalories(lunch) + calculateFoodCalories(vegProtein)
                        });
                    } else {
                        meals.push({
                            name: `Lunch: ${lunch}`,
                            calories: calculateMealCalories(lunch)
                        });
                    }
                } else {
                    meals.push({
                        name: `Lunch: ${lunch}`,
                        calories: calculateMealCalories(lunch)
                    });
                }
            } else {
                meals.push({
                    name: `Lunch: ${lunch}`,
                    calories: calculateMealCalories(lunch)
                });
            }
            
            // Add other meals
            meals.unshift({
                name: `Breakfast: ${breakfast}`,
                calories: calculateMealCalories(breakfast)
            });
            
            meals.push({
                name: `Snack: ${snack}`,
                calories: calculateMealCalories(snack)
            });
            
            meals.push({
                name: `Dinner: ${dinner}`,
                calories: calculateMealCalories(dinner)
            });
            
            return meals;
        }

        // Calculate calories for a meal based on food items
        function calculateMealCalories(mealDescription) {
            let totalCalories = 0;
            
            // Extract food items from meal description
            const foodItems = mealDescription.split(/[\+\/]/).map(item => item.trim());
            
            for (const item of foodItems) {
                // Remove quantities in parentheses
                const cleanItem = item.replace(/\([^)]*\)/g, '').trim();
                
                // Find the food in our database
                const food = findFoodItem(cleanItem);
                
                if (food) {
                    totalCalories += food.cal;
                } else {
                    // Estimate based on meal type
                    if (item.toLowerCase().includes('breakfast')) {
                        totalCalories += getRandomCalories(300, 500);
                    } else if (item.toLowerCase().includes('lunch')) {
                        totalCalories += getRandomCalories(400, 700);
                    } else if (item.toLowerCase().includes('snack')) {
                        totalCalories += getRandomCalories(100, 250);
                    } else if (item.toLowerCase().includes('dinner')) {
                        totalCalories += getRandomCalories(350, 600);
                    } else {
                        totalCalories += getRandomCalories(200, 400);
                    }
                }
            }
            
            return totalCalories;
        }

        // Calculate calories for a single food item
        function calculateFoodCalories(foodName) {
            const food = findFoodItem(foodName);
            return food ? food.cal : getRandomCalories(150, 300);
        }

        // Generate daily exercises - Updated to include yoga
        function generateDailyExercises(day) {
            // Include yoga in rotation
            const exerciseTypes = ['cardio', 'strength', 'flexibility', 'hiit', 'yoga'];
            const typeIndex = (day - 1) % exerciseTypes.length;
            const primaryType = exerciseTypes[typeIndex];
            
            // Get 1-2 exercises
            const exercises = [];
            const primaryExercises = plannerData.exercises[primaryType];
            
            // Add primary exercise
            exercises.push(getRandomItem(primaryExercises));
            
            // Sometimes add a second exercise (30% chance)
            if (Math.random() < 0.3) {
                const secondaryType = getRandomItem(exerciseTypes.filter(t => t !== primaryType));
                const secondaryExercises = plannerData.exercises[secondaryType];
                exercises.push(getRandomItem(secondaryExercises));
            }
            
            return exercises;
        }

        // Update the UI for current day
        function updateDayDisplay(day) {
            plannerData.currentDay = day;
            const dayPlan = plannerData.days[day - 1];
            
            // Update day badge and title
            document.getElementById('dayBadge').textContent = `Day ${day} of 14`;
            document.getElementById('dayTitle').textContent = dayPlan.cuisine + ' Cuisine' + 
                (dayPlan.hasMeat ? ' (Meat Day)' : '');
            
            // Update jump to day selector
            document.getElementById('jumpToDay').value = day;
            
            // Update navigation buttons
            document.getElementById('prevDayBtn').disabled = day === 1;
            document.getElementById('nextDayBtn').disabled = day === plannerData.totalDays;
            
            // Update meals
            const mealList = document.getElementById('mealList');
            mealList.innerHTML = '';
            
            dayPlan.meals.forEach(meal => {
                const mealItem = document.createElement('div');
                mealItem.className = 'meal-item';
                mealItem.innerHTML = `
                    <div class="meal-name">${meal.name}</div>
                    <div class="meal-calories">${meal.calories} kcal</div>
                `;
                mealList.appendChild(mealItem);
            });
            
            // Update cuisine badges
            const cuisineBadges = document.getElementById('cuisineBadges');
            cuisineBadges.innerHTML = '';
            
            // Show upcoming cuisines (next 3 days)
            for (let i = 0; i < 3 && day + i <= plannerData.totalDays; i++) {
                const nextDay = plannerData.days[day + i - 1];
                const badgeClass = getBadgeClass(nextDay.cuisine);
                const badge = document.createElement('span');
                badge.className = `badge ${badgeClass}`;
                badge.textContent = `${nextDay.cuisine} (Day ${day + i})`;
                badge.title = `Click to change Day ${day + i} to ${nextDay.cuisine}`;
                badge.dataset.day = day + i;
                badge.dataset.cuisine = nextDay.cuisine;
                badge.addEventListener('click', () => changeDayCuisine(day + i));
                cuisineBadges.appendChild(badge);
            }
            
            // Update exercises
            const exerciseList = document.getElementById('exerciseList');
            exerciseList.innerHTML = '';
            
            dayPlan.exercises.forEach((exercise, index) => {
                const exerciseItem = document.createElement('div');
                exerciseItem.className = 'exercise-item';
                exerciseItem.dataset.exerciseIndex = index;
                exerciseItem.innerHTML = `
                    <div class="exercise-name">
                        <div>${exercise.name}</div>
                        <small style="color: var(--text-muted);">${exercise.duration}  ${exercise.type.charAt(0).toUpperCase() + exercise.type.slice(1)}</small>
                    </div>
                    <div class="exercise-burn">${exercise.calories} kcal</div>
                    <button class="remove-exercise" data-exercise-index="${index}">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                exerciseList.appendChild(exerciseItem);
            });
            
            // Add event listeners to remove buttons
            document.querySelectorAll('.remove-exercise').forEach(button => {
                button.addEventListener('click', function() {
                    const exerciseIndex = parseInt(this.dataset.exerciseIndex);
                    removeExercise(exerciseIndex);
                });
            });
            
            // Update calorie balance with refined calculation
            updateCalorieBalance(dayPlan);
            
            // Update exercise directory
            updateExerciseDirectory();
        }

        // Remove exercise from current day's plan
        function removeExercise(exerciseIndex) {
            const day = plannerData.currentDay;
            const dayPlan = plannerData.days[day - 1];
            
            if (dayPlan.exercises.length > 1) {
                dayPlan.exercises.splice(exerciseIndex, 1);
                updateDayDisplay(day);
                showNotification('Exercise removed from today\'s plan');
            } else {
                showNotification('Cannot remove the last exercise. Add a new one first.');
            }
        }

        // Change cuisine for a specific day
        function changeDayCuisine(day) {
            const dayPlan = plannerData.days[day - 1];
            const currentCuisine = dayPlan.cuisine;
            
            // Get available cuisines (exclude current one)
            const availableCuisines = plannerData.cuisineTypes.filter(c => c !== currentCuisine);
            
            // Show a simple selection dialog
            const newCuisine = availableCuisines[Math.floor(Math.random() * availableCuisines.length)];
            
            // Update the day's cuisine
            dayPlan.cuisine = newCuisine;
            
            // Regenerate meals for this day with new cuisine
            dayPlan.meals = generateDailyMeals(
                newCuisine, 
                dayPlan.hasMeat, 
                plannerData.isVegetarian
            );
            
            // Update display
            if (day === plannerData.currentDay) {
                updateDayDisplay(day);
            }
            
            showNotification(`Day ${day} changed from ${currentCuisine} to ${newCuisine}`);
        }

        // Update calorie balance display with refined calculation
        function updateCalorieBalance(dayPlan) {
            const totalFoodCalories = dayPlan.meals.reduce((sum, meal) => sum + meal.calories, 0);
            const totalExerciseCalories = dayPlan.exercises.reduce((sum, ex) => sum + ex.calories, 0);
            
            // Refined calculation: deficit = intake - exercise - BMR
            const bmr = plannerData.userData.bmr || 1700; // Fallback if BMR not calculated
            const netCalories = totalFoodCalories - totalExerciseCalories - bmr;
            
            // Display BMR-adjusted target
            const adjustedTarget = plannerData.targetCalories - bmr;
            
            document.getElementById('targetCalories').textContent = Math.round(plannerData.targetCalories);
            document.getElementById('foodIntake').textContent = totalFoodCalories;
            document.getElementById('exerciseBurn').textContent = totalExerciseCalories;
            document.getElementById('netCalories').textContent = Math.round(netCalories);
            
            // Determine balance status based on refined calculation
            let status, message, color;
            const targetDeficit = plannerData.userData.dailyCalorieDeficit || 0;
            const actualDeficit = totalFoodCalories - totalExerciseCalories - plannerData.targetCalories;
            
            // For weight loss: actual deficit should be close to target deficit
            // For weight gain: actual surplus should be close to target surplus
            // For maintenance: actual should be close to target
            
            let difference;
            if (plannerData.userData.goal === 'lose') {
                difference = Math.abs(targetDeficit - actualDeficit);
            } else if (plannerData.userData.goal === 'gain') {
                difference = Math.abs(targetDeficit - actualDeficit);
            } else {
                difference = Math.abs(actualDeficit);
            }
            
            if (difference < 100) {
                status = 'PERFECT';
                message = 'Perfect Balance Achieved!';
                color = 'var(--secondary)';
            } else if (difference < 300) {
                status = 'GOOD';
                message = 'Good Balance!';
                color = 'var(--accent)';
            } else {
                status = 'NEEDS WORK';
                message = 'Consider adjusting your intake or exercise';
                color = 'var(--danger)';
            }
            
            // Add goal-specific message
            if (plannerData.userData.goal === 'lose') {
                const deficitText = Math.abs(actualDeficit).toFixed(0);
                if (actualDeficit > 0) {
                    message = `Surplus: ${deficitText} kcal above target`;
                } else {
                    message = `Deficit: ${deficitText} kcal below target`;
                }
            }
            
            const balanceStatus = document.getElementById('balanceStatus');
            balanceStatus.innerHTML = `<i class="fas fa-${status === 'PERFECT' ? 'check' : status === 'GOOD' ? 'check' : 'exclamation'}-circle"></i> ${status}`;
            balanceStatus.style.color = color;
            
            document.getElementById('balanceMessage').innerHTML = `<i class="fas fa-${status === 'PERFECT' ? 'check' : status === 'GOOD' ? 'check' : 'exclamation'}-circle"></i> ${message}`;
            document.getElementById('balanceMessage').style.color = color;
        }

        // Update exercise directory
        function updateExerciseDirectory() {
            const directoryList = document.getElementById('directoryExerciseList');
            directoryList.innerHTML = '';
            
            // Combine all exercises
            const allExercises = [];
            Object.entries(plannerData.exercises).forEach(([category, exercises]) => {
                exercises.forEach(exercise => {
                    allExercises.push({
                        ...exercise,
                        category: category
                    });
                });
            });
            
            // Display all exercises
            allExercises.forEach(exercise => {
                const exerciseOption = document.createElement('div');
                exerciseOption.className = 'exercise-option';
                exerciseOption.dataset.type = exercise.type;
                
                exerciseOption.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 5px; color: var(--text-primary);">${exercise.name}</div>
                            <div style="font-size: 13px; color: var(--text-muted);">${exercise.duration}  ${exercise.calories} kcal burn</div>
                        </div>
                        <span style="background: ${getExerciseColor(exercise.type)}; color: white; padding: 3px 10px; border-radius: 20px; font-size: 12px; font-weight: 500;">
                            ${exercise.type.charAt(0).toUpperCase() + exercise.type.slice(1)}
                        </span>
                    </div>
                `;
                
                // Add hover effects
                exerciseOption.addEventListener('mouseenter', () => {
                    if (!exerciseOption.classList.contains('selected')) {
                        exerciseOption.style.borderColor = 'var(--border)';
                        exerciseOption.style.backgroundColor = 'var(--bg-input)';
                    }
                });
                
                exerciseOption.addEventListener('mouseleave', () => {
                    if (!exerciseOption.classList.contains('selected')) {
                        exerciseOption.style.borderColor = 'var(--border)';
                        exerciseOption.style.backgroundColor = 'var(--bg-input)';
                    }
                });
                
                directoryList.appendChild(exerciseOption);
            });
        }

        // Get color for exercise type
        function getExerciseColor(type) {
            switch(type) {
                case 'cardio': return 'var(--primary)';
                case 'strength': return 'var(--danger)';
                case 'flexibility': return 'var(--purple)';
                case 'hiit': return 'var(--accent)';
                case 'yoga': return 'var(--secondary)';
                default: return 'var(--text-muted)';
            }
        }

        // Get badge class for cuisine
        function getBadgeClass(cuisine) {
            switch(cuisine) {
                case 'South Indian': return 'badge-south';
                case 'North Indian': return 'badge-north';
                case 'Continental': return 'badge-continental';
                case 'Regular': return 'badge-regular';
                case 'Mediterranean': return 'badge-south';
                case 'Asian': return 'badge-north';
                case 'Mexican': return 'badge-continental';
                default: return 'badge-regular';
            }
        }

        // Utility functions
        function getRandomItem(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function getRandomCalories(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function avoidConsecutiveDuplicates(array, maxConsecutive) {
            const result = [...array];
            
            for (let i = 0; i < result.length - maxConsecutive; i++) {
                let allSame = true;
                for (let j = 1; j <= maxConsecutive; j++) {
                    if (result[i] !== result[i + j]) {
                        allSame = false;
                        break;
                    }
                }
                
                if (allSame) {
                    // Find a different item to swap with
                    for (let k = i + maxConsecutive + 1; k < result.length; k++) {
                        if (result[k] !== result[i]) {
                            [result[i + maxConsecutive], result[k]] = [result[k], result[i + maxConsecutive]];
                            break;
                        }
                    }
                }
            }
            
            return result;
        }

        function getRandomIndices(max, minCount, maxCount) {
            const count = Math.floor(Math.random() * (maxCount - minCount + 1)) + minCount;
            const indices = new Set();
            
            while (indices.size < count) {
                indices.add(Math.floor(Math.random() * max));
            }
            
            return Array.from(indices);
        }

        // Helper function to get default alternatives
        function getDefaultAlternatives(type) {
            switch(type) {
                case 'cardio':
                    return ['Cycling', 'Swimming', 'Elliptical Trainer', 'Stair Climbing', 'Morning Walk'];
                case 'strength':
                    return ['Bodyweight Workout', 'Resistance Band Workout', 'Kettlebell Training', 'Pilates', 'Push-ups'];
                case 'flexibility':
                    return ['Pilates', 'Stretching Routine', 'Tai Chi', 'Meditation Walk', 'Yoga Flow'];
                case 'hiit':
                    return ['Circuit Training', 'Tabata Training', 'CrossFit WOD', 'Bootcamp', 'Sprint Intervals'];
                case 'yoga':
                    return ['Suryanamaskar', 'Hatha Yoga', 'Vinyasa Flow', 'Power Yoga', 'Meditation'];
                default:
                    return ['Walking', 'Yoga', 'Cycling', 'Bodyweight Exercises'];
            }
        }

        // Event Listeners
        document.getElementById('shuffleFoodsBtn').addEventListener('click', () => {
            const day = plannerData.currentDay;
            const dayPlan = plannerData.days[day - 1];
            
            // Regenerate meals for this day
            dayPlan.meals = generateDailyMeals(
                dayPlan.cuisine, 
                dayPlan.hasMeat, 
                plannerData.isVegetarian
            );
            
            updateDayDisplay(day);
            
            // Show notification
            showNotification('Meals shuffled for today!');
        });

        document.getElementById('regenerateDayBtn').addEventListener('click', () => {
            const day = plannerData.currentDay;
            
            // Regenerate entire day
            const cuisine = plannerData.days[day - 1].cuisine;
            const hasMeat = plannerData.days[day - 1].hasMeat;
            
            plannerData.days[day - 1] = {
                day: day,
                cuisine: cuisine,
                hasMeat: hasMeat,
                meals: generateDailyMeals(cuisine, hasMeat, plannerData.isVegetarian),
                exercises: generateDailyExercises(day)
            };
            
            updateDayDisplay(day);
            
            // Show notification
            showNotification('Day regenerated with new plan!');
        });

        document.getElementById('prevDayBtn').addEventListener('click', () => {
            if (plannerData.currentDay > 1) {
                updateDayDisplay(plannerData.currentDay - 1);
            }
        });

        document.getElementById('nextDayBtn').addEventListener('click', () => {
            if (plannerData.currentDay < plannerData.totalDays) {
                updateDayDisplay(plannerData.currentDay + 1);
            }
        });

        document.getElementById('refreshMealsBtn').addEventListener('click', () => {
            const day = plannerData.currentDay;
            const dayPlan = plannerData.days[day - 1];
            
            // Regenerate meals for this day
            dayPlan.meals = generateDailyMeals(
                dayPlan.cuisine, 
                dayPlan.hasMeat, 
                plannerData.isVegetarian
            );
            
            updateDayDisplay(day);
            
            // Show notification
            showNotification('Meals refreshed!');
        });

        // Jump to day selector
        document.getElementById('jumpToDay').addEventListener('change', function() {
            const day = parseInt(this.value);
            updateDayDisplay(day);
        });

        // Change cuisine button
        document.getElementById('changeCuisineBtn').addEventListener('click', () => {
            const day = parseInt(document.getElementById('jumpToDay').value);
            changeDayCuisine(day);
        });

        // Customize Exercise Button
        document.getElementById('customizeExerciseBtn').addEventListener('click', () => {
            const panel = document.getElementById('customizationPanel');
            const alternativesDiv = document.getElementById('alternativeExercises');
            
            // Clear previous alternatives
            alternativesDiv.innerHTML = '';
            
            // Get current exercises for the day
            const day = plannerData.currentDay;
            const dayPlan = plannerData.days[day - 1];
            
            // Create alternatives for each current exercise
            dayPlan.exercises.forEach((exercise, index) => {
                const exerciseName = exercise.name;
                
                // Get alternatives for this exercise
                const alternatives = plannerData.exerciseAlternatives[exerciseName] || 
                    getDefaultAlternatives(exercise.type);
                
                // Create section for this exercise
                const altSection = document.createElement('div');
                altSection.style.marginBottom = '20px';
                altSection.innerHTML = `
                    <h5 style="margin: 10px 0 5px; color: var(--text-secondary); font-size: 14px;">
                        Replace: <strong style="color: var(--text-primary);">${exerciseName}</strong>
                    </h5>
                `;
                
                // Create container for alternative buttons
                const altContainer = document.createElement('div');
                altContainer.className = 'alternative-exercises';
                altContainer.style.display = 'grid';
                altContainer.style.gridTemplateColumns = 'repeat(auto-fill, minmax(200px, 1fr))';
                altContainer.style.gap = '10px';
                altContainer.style.marginTop = '10px';
                
                // Add each alternative
                alternatives.forEach(altName => {
                    const altExercise = document.createElement('div');
                    altExercise.className = 'alt-exercise';
                    altExercise.style.cursor = 'pointer';
                    altExercise.style.padding = '12px';
                    altExercise.style.textAlign = 'center';
                    altExercise.style.border = '1px solid var(--border)';
                    altExercise.style.borderRadius = 'var(--radius-md)';
                    altExercise.style.backgroundColor = 'var(--bg-input)';
                    altExercise.style.transition = 'var(--transition)';
                    altExercise.textContent = altName;
                    
                    altExercise.addEventListener('mouseenter', () => {
                        altExercise.style.borderColor = 'var(--primary)';
                        altExercise.style.backgroundColor = 'rgba(59, 130, 246, 0.05)';
                    });
                    
                    altExercise.addEventListener('mouseleave', () => {
                        altExercise.style.borderColor = 'var(--border)';
                        altExercise.style.backgroundColor = 'var(--bg-input)';
                    });
                    
                    altExercise.addEventListener('click', () => {
                        // Find the new exercise details
                        let newExercise = null;
                        
                        // Search in all exercise categories
                        Object.entries(plannerData.exercises).forEach(([category, exercises]) => {
                            const found = exercises.find(ex => ex.name === altName);
                            if (found) {
                                newExercise = found;
                            }
                        });
                        
                        if (newExercise) {
                            // Replace the exercise at the specific index
                            dayPlan.exercises[index] = newExercise;
                            
                            // Update the display
                            updateDayDisplay(day);
                            
                            // Close the panel
                            panel.classList.remove('active');
                            
                            // Show notification
                            showNotification(`Replaced ${exerciseName} with ${altName}`);
                        } else {
                            // If exercise not found in data, create a basic one
                            newExercise = {
                                name: altName,
                                duration: exercise.duration,
                                calories: exercise.calories,
                                type: exercise.type
                            };
                            
                            dayPlan.exercises[index] = newExercise;
                            updateDayDisplay(day);
                            panel.classList.remove('active');
                            showNotification(`Replaced ${exerciseName} with ${altName}`);
                        }
                    });
                    
                    altContainer.appendChild(altExercise);
                });
                
                altSection.appendChild(altContainer);
                alternativesDiv.appendChild(altSection);
            });
            
            // Toggle panel visibility
            panel.classList.toggle('active');
            
            // If panel is being shown, scroll to it
            if (panel.classList.contains('active')) {
                panel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });

        document.getElementById('closeCustomizationBtn').addEventListener('click', () => {
            document.getElementById('customizationPanel').classList.remove('active');
        });

        // Exercise directory filtering
        document.querySelectorAll('.filter-btn').forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Add active class to clicked button
                this.classList.add('active');
                
                const filter = this.dataset.filter;
                filterExercises(filter);
            });
        });

        function filterExercises(filter) {
            const exerciseOptions = document.querySelectorAll('#directoryExerciseList .exercise-option');
            
            exerciseOptions.forEach(option => {
                if (filter === 'all' || option.dataset.type === filter) {
                    option.style.display = 'block';
                } else {
                    option.style.display = 'none';
                }
            });
        }

        // Add selected exercises to plan
        document.getElementById('addExercisesBtn').addEventListener('click', () => {
            const selectedExercise = document.querySelector('#directoryExerciseList .exercise-option.selected');
            
            if (selectedExercise) {
                // Get exercise name from the DOM structure
                const exerciseNameElement = selectedExercise.querySelector('div > div:first-child > div:first-child');
                const exerciseName = exerciseNameElement ? exerciseNameElement.textContent.trim() : '';
                
                if (!exerciseName) {
                    showNotification('Could not find exercise name');
                    return;
                }
                
                // Find the exercise details in the data
                let exerciseDetails = null;
                
                // Search through all exercise categories
                Object.entries(plannerData.exercises).forEach(([category, exercises]) => {
                    const found = exercises.find(ex => ex.name === exerciseName);
                    if (found) {
                        exerciseDetails = found;
                    }
                });
                
                if (exerciseDetails) {
                    const day = plannerData.currentDay;
                    const dayPlan = plannerData.days[day - 1];
                    
                    // Check if exercise already exists in today's plan
                    const alreadyExists = dayPlan.exercises.some(ex => ex.name === exerciseName);
                    
                    if (!alreadyExists) {
                        // Add the exercise to today's plan
                        dayPlan.exercises.push(exerciseDetails);
                        
                        // Update the display
                        updateDayDisplay(day);
                        
                        // Show success notification
                        showNotification(`Added ${exerciseName} to today's plan`);
                        
                        // Clear selection
                        selectedExercise.classList.remove('selected');
                    } else {
                        showNotification(`${exerciseName} is already in today's plan`);
                    }
                } else {
                    // If exercise not found in data, create a basic one
                    const type = selectedExercise.dataset.type || 'cardio';
                    exerciseDetails = {
                        name: exerciseName,
                        duration: '30min',
                        calories: 250,
                        type: type
                    };
                    
                    const day = plannerData.currentDay;
                    const dayPlan = plannerData.days[day - 1];
                    
                    // Check if already exists
                    const alreadyExists = dayPlan.exercises.some(ex => ex.name === exerciseName);
                    
                    if (!alreadyExists) {
                        dayPlan.exercises.push(exerciseDetails);
                        updateDayDisplay(day);
                        showNotification(`Added ${exerciseName} to today's plan`);
                        selectedExercise.classList.remove('selected');
                    } else {
                        showNotification(`${exerciseName} is already in today's plan`);
                    }
                }
            } else {
                showNotification('Please select an exercise from the directory first');
            }
        });

        // Remove selected exercises from directory
        document.getElementById('removeExercisesBtn').addEventListener('click', () => {
            const selectedExercises = document.querySelectorAll('#directoryExerciseList .exercise-option.selected');
            
            if (selectedExercises.length > 0) {
                selectedExercises.forEach(selectedExercise => {
                    // Get exercise name from the DOM structure
                    const exerciseNameElement = selectedExercise.querySelector('div > div:first-child > div:first-child');
                    const exerciseName = exerciseNameElement ? exerciseNameElement.textContent.trim() : '';
                    
                    if (exerciseName) {
                        const day = plannerData.currentDay;
                        const dayPlan = plannerData.days[day - 1];
                        
                        // Find and remove the exercise from today's plan
                        const exerciseIndex = dayPlan.exercises.findIndex(ex => ex.name === exerciseName);
                        if (exerciseIndex !== -1) {
                            dayPlan.exercises.splice(exerciseIndex, 1);
                        }
                    }
                });
                
                // Update display
                updateDayDisplay(plannerData.currentDay);
                showNotification(`Removed ${selectedExercises.length} exercise(s) from today's plan`);
                
                // Clear selection
                document.querySelectorAll('#directoryExerciseList .exercise-option.selected').forEach(item => {
                    item.classList.remove('selected');
                });
            } else {
                showNotification('Please select exercises from the directory first');
            }
        });

        // Exercise selection in directory
        document.addEventListener('click', (e) => {
            const exerciseOption = e.target.closest('.exercise-option');
            
            // Only handle clicks on exercise options in the directory
            if (exerciseOption && exerciseOption.closest('#directoryExerciseList')) {
                // Toggle selection (allow multiple selection)
                exerciseOption.classList.toggle('selected');
                
                // Visual feedback
                if (exerciseOption.classList.contains('selected')) {
                    exerciseOption.style.borderColor = 'var(--primary)';
                    exerciseOption.style.backgroundColor = 'rgba(59, 130, 246, 0.05)';
                } else {
                    exerciseOption.style.borderColor = 'var(--border)';
                    exerciseOption.style.backgroundColor = 'var(--bg-input)';
                }
            }
        });

        // Print Plan Button
        document.getElementById('printPlanBtn').addEventListener('click', () => {
            window.print();
        });

        // Save Plan as PDF Button
        document.getElementById('savePlanBtn').addEventListener('click', () => {
            showNotification('PDF export feature coming soon!');
            // Note: For actual PDF export, you would need a library like jsPDF
            // or a backend service. This is a placeholder.
        });

        // Generate Plan Function
        function generatePlan(e) {
            e.preventDefault();
            
            // Get form values
            const age = document.getElementById('age').value;
            const height = document.getElementById('height').value;
            const weight = document.getElementById('weight').value;
            
            if (!age || !height || !weight) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Generate the 14-day plan with refined calorie calculations
            generate14DayPlan();
            
            // Show results section
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('uplannerPromo').style.display = 'block';
            
            // Update display for day 1
            updateDayDisplay(1);
            
            // Scroll to results
            document.getElementById('resultsSection').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
            
            // Show success message with calorie info
            const calorieInfo = `
                Based on your input:
                 BMR: ${Math.round(plannerData.userData.bmr)} kcal/day
                 TDEE: ${Math.round(plannerData.userData.tdee)} kcal/day
                 Daily Target: ${Math.round(plannerData.userData.dailyCalorieTarget)} kcal/day
                 Daily ${plannerData.userData.goal === 'lose' ? 'Deficit' : plannerData.userData.goal === 'gain' ? 'Surplus' : 'Balance'}: ${Math.abs(Math.round(plannerData.userData.dailyCalorieDeficit))} kcal/day
            `;
            
            showNotification('14-day plan generated successfully! ' + calorieInfo);
        }

        // Show notification
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
                color: white;
                padding: 15px 20px;
                border-radius: var(--radius-md);
                box-shadow: var(--shadow-lg);
                z-index: 10000;
                font-weight: 500;
                transition: transform 0.3s ease, opacity 0.3s ease;
                transform: translateX(120%);
                opacity: 0;
                display: flex;
                align-items: center;
                gap: 10px;
                max-width: 400px;
                word-wrap: break-word;
            `;
            notification.innerHTML = `<i class="fas fa-check-circle"></i> <span>${message}</span>`;
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
                notification.style.opacity = '1';
            }, 10);
            
            // Remove after 5 seconds (longer for detailed messages)
            setTimeout(() => {
                notification.style.transform = 'translateX(120%)';
                notification.style.opacity = '0';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 5000);
        }

        // Simulate plan generation on page load for demo
        document.addEventListener('DOMContentLoaded', () => {
            // Pre-fill form for demo
            document.getElementById('age').value = '28';
            document.getElementById('height').value = '175';
            document.getElementById('weight').value = '75';
            document.getElementById('target').value = '5';
            document.getElementById('weeks').value = '8';
            
            // Generate initial plan for demo
            generate14DayPlan();
            updateDayDisplay(1);
            
            // Initialize exercise directory filters
            filterExercises('all');
        });
    </script>   
</body>
</html>
